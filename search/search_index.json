{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to the JustLend DAO Documentation!","text":"<p>JustLend DAO is the first decentralized lending protocol on the TRON network, dedicated to providing users with an efficient, secure, and open digital asset lending marketplace. The source code of JustLend DAO is available on GitHub. This article offers a comprehensive overview of JustLend DAO, guiding you through how to use the platform and covering the following key areas.</p> <ul> <li>GETTING STARTED</li> <li>GOVERNANCE</li> <li>DEVELOPERS</li> <li>RESOURCES</li> </ul> <p>For more information about JustLend DAO and related topics, please visit the official website at justlend.org or explore the additional resources linked below:</p> <ul> <li>JustLend DAO Whitepaper</li> <li>JustLend DAO Developer Hub</li> </ul>"},{"location":"developers/apis/","title":"APIs","text":""},{"location":"developers/contracts_overview/","title":"Contracts Overview","text":"<p>JustLend DAO Protocol contracts are divided in these repositories:</p> <ul> <li>Supply and Borrow Market: contains core contracts for JustLend DAO, including logic for supply and borrow market (SBM), supply and borrow market V2 (SBM V2)\uff0cinterest rate model, governance, price oracle and comptroller.</li> <li>SBM: enables supplying of crypto assets as collateral in order to borrow the base asset. Accounts can also earn interest by supplying the base asset to the protocol.</li> <li>SBM V2: an isolated-collateral lending protocol with a dual-layer structure of Vaults and Markets, along with an Adaptive Curve Interest Rate Model (IRM) for dynamic rate adjustment.</li> <li>Interest Rate Model: users with a positive balance of the base asset earn interest, denominated in the base asset, based on a supply rate model.</li> <li>Price-Oracle: contains the price oracle contracts we support, along with the logic validation for prices returned by these oracles.</li> <li>Governance: contracts used for proposing, voting and executing proposals.</li> <li>Comptroller: the risk management layer of the protocol. It determines how much collateral a user is required to maintain, and whether user can be liquidated.</li> <li>Staked TRX: the contracts utilized for staking TRX to earn high rewards.</li> <li>Energy Rental: contracts enable users to rent energy anytime with a low price.</li> </ul>"},{"location":"developers/contracts_overview/#core-contracts","title":"Core Contracts","text":""},{"location":"developers/contracts_overview/#there-are-5-categories-of-core-repository-contracts-in-sbm","title":"There are 5 categories of core repository contracts in SBM:","text":"<ul> <li>JTokens Contract</li> <li>Interest Rate Model Contract</li> <li>Price Oracle Contract</li> <li>Governance Contract</li> <li>Comptroller Contract</li> </ul>"},{"location":"developers/contracts_overview/#jtokens-contract","title":"JTokens Contract","text":"<p><code>JToken:</code> the contract used to support all assets by JustLend DAO, such as the jTRX, jUSDT, jSUN and jBTC you receive after supplying the corresponding assets.</p>"},{"location":"developers/contracts_overview/#interest-rate-model-contract","title":"Interest Rate Model Contract","text":"<p><code>WhitePaperInterestRateModel:</code> the contract used to set up a straightforward interest rate model, which the borrowing rate is directly proportional to the utilization.</p> <p><code>JumpRateModelV2:</code> the Contract used to set up a complex interest rate model, which the interest rate jumps to a higher tier when the utilization rate exceeds u optimal.</p>"},{"location":"developers/contracts_overview/#price-oracle-contract","title":"Price Oracle Contract","text":"<p><code>Price Oracle:</code> the JustLend Protocol use WinkLink's price service to fetch the token price. The PriceOracle contract is responsible for setting and display token prices.</p>"},{"location":"developers/contracts_overview/#governance-contract","title":"Governance Contract","text":"<p><code>GovernorBravo:</code> The main JustLend Governance Contract. Users interact with it to: - Submit new proposal - Vote on a proposal - Cancel a proposal - Queue a proposal for execution with a time lock executor contract</p> <p><code>Timelock:</code> the contract used to execute or cancel a queued transaction.</p>"},{"location":"developers/contracts_overview/#comptroller-contract","title":"Comptroller Contract","text":"<p><code>Comptroller:</code> the Comptroller contract is the central contract for each lending pool. It contains functionality central to borrowing activity in the pool like supplying and borrowing assets and liquidations.</p>"},{"location":"developers/contracts_overview/#there-are-5-categories-of-core-repository-contracts-in-sbm-v2","title":"There are 5 categories of core repository contracts in SBM V2:","text":"<ul> <li>Moolah Market</li> <li>Moolah Vault</li> <li>TRX Provider</li> <li>Resilient Oracle</li> <li>Interest Rate Model</li> </ul>"},{"location":"developers/contracts_overview/#moolah-market","title":"Moolah Market","text":"<p><code>Moolah Market:</code> the Moolah Lending Market adopts an isolated-collateral lending protocol, where each market supports a single collateral asset paired with a single borrowable asset.</p>"},{"location":"developers/contracts_overview/#moolah-vault","title":"Moolah Vault","text":"<p><code>Moolah Vault:</code> each Vault serves as a single-asset management contract that provides liquidity to various lending markets.</p>"},{"location":"developers/contracts_overview/#trx-provider","title":"TRX Provider","text":"<p><code>TRX Provider:</code> users can directly interact with the system using TRX through the TRXProvider module. The TRXProvider internally handles the conversion between TRX and WTRX, allowing seamless user operations such as deposits and withdrawals.</p>"},{"location":"developers/contracts_overview/#resilient-oracle","title":"Resilient Oracle","text":"<p><code>Resilient Oracle:</code> an aggregated price feed contract that supports up to three price sources for each token. It provides reliable on-chain price data with 18-decimal precision and allows users or protocols to query the latest price of any supported token. </p>"},{"location":"developers/contracts_overview/#interest-rate-model","title":"Interest Rate Model","text":"<p><code>IRM:</code> the AdaptiveCurve Interest Rate Model. It builds upon the Jump Curve model used in JustLend DAO V1, but adds dynamic adaptability, allowing real-time rate adjustments to keep market utilization near an optimal level.</p>"},{"location":"developers/contracts_overview/#staked-trx-contracts","title":"Staked TRX Contracts","text":"<p><code>Staked TRX(sTRX):</code> the contract utilized for staking TRX to earn high rewards.</p>"},{"location":"developers/contracts_overview/#energy-rental","title":"Energy Rental","text":"<p><code>Energy Rental:</code> contracts enable users to rent energy anytime with a low price.</p>"},{"location":"developers/deployed_contracts/","title":"Deployed Contracts","text":""},{"location":"developers/deployed_contracts/#supply-and-borrow-market-v1","title":"Supply and Borrow Market V1","text":"<ul> <li> <p>JToken</p> <ul> <li><code>Unitroller:</code> TGjYzgCyPobsNS9n6WcbdLVR9dH7mWqFx7</li> <li><code>TRX CErc20Delegate:</code> NA</li> <li><code>TRX CErc20Delegator:</code> TE2RzoSV3wFK99w6J9UnnZ4vLfXYoxvRwP</li> <li><code>USDD:</code> TXDk8mbtRbXeYuMNS83CfKPaYYT8XWv9Hz</li> <li><code>USDD CErc20Delegate:</code> TLrEfG4QCbax8MTYgZzmjj4gE8RPVNvUn4</li> <li><code>USDD CErc20Delegator:</code> TKFRELGGoRgiayhwJTNNLqCNjFoLBh3Mnf</li> <li><code>USDT:</code> TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t</li> <li><code>USDT CErc20Delegate:</code> TLjn59xNM7VEK6VZ3VQ8Y1ipxsdsFka5wZ</li> <li><code>USDT CErc20Delegator:</code> TXJgMdjVX5dKiQaUi9QobwNxtSQaFqccvd</li> <li><code>wstUSDT:</code> TGkxzkDKyMeq2T7edKnyjZoFypyzjkkssq</li> <li><code>wstUSDT CErc20Delegate:</code> TUx4cV8FQNR5W4FhtF7mHZwaJMoco2464o</li> <li><code>wstUSDT CErc20Delegator:</code> TD5SdLw5scR6mXgyMK2xKrFJpauDjpKqrW</li> <li><code>sTRX:</code> TU3kjFuhtEo42tsCBtfYUAZxoqQ4yuSLQ5</li> <li><code>sTRX CErc20Delegate:</code> TCyNbCipGbAybb8rG4aatEoEnfuYpVYCPP</li> <li><code>sTRX CErc20Delegator:</code> TJQ9rbVe9ei3nNtyGgBL22Fuu2xYjZaLAQ</li> <li><code>SUN:</code> TSSMHYeV2uE9qYH95DqyoCuNCzEL1NvU3S</li> <li><code>SUN CErc20Delegate:</code> TM82erAZJSP7NKc17JdTnzVC8WKJHismWB</li> <li><code>SUN CErc20Delegator:</code> TPXDpkg9e3eZzxqxAUyke9S4z4pGJBJw9e</li> <li><code>BTT:</code> TAFjULxiVgT4qWk6UZwjqwZXTSaGaqnVp4</li> <li><code>BTT CErc20Delegate:</code> TH3x5EqLnPduHNX41MaCCb2UfnfFMLuYwe</li> <li><code>BTT CErc20Delegator:</code> TUaUHU9Dy8x5yNi1pKnFYqHWojot61Jfto</li> <li><code>NFT:</code> TFczxzPhnThNSqr5by8tvxsdCFRRz6cPNq</li> <li><code>NFT CErc20Delegate:</code> TLkUdtDBLMfJdXni2iTa4u2DKM53XmDJHi</li> <li><code>NFT CErc20Delegator:</code> TFpPyDCKvNFgos3g3WVsAqMrdqhB81JXHE</li> <li><code>JST:</code> TCFLL5dx5ZJdKnWuesXxi1VPwjLVmWZZy9</li> <li><code>JST CErc20Delegate:</code> TQ2sbnmxtR7jrNk4nxz2A8f9sneCqmk6SB</li> <li><code>JST CErc20Delegator:</code> TWQhCXaWz4eHK4Kd1ErSDHjMFPoPc9czts</li> <li><code>WIN:</code> TLa2f6VPqDgRE67v1736s7bJ8Ray5wYjU7</li> <li><code>WIN CErc20Delegate:</code> TW3GyD3hYkKwzSGytWwWGXpe2a93zCpRzJ</li> <li><code>WIN CErc20Delegator:</code> TRg6MnpsFXc82ymUPgf5qbj59ibxiEDWvv</li> <li><code>USDJ:</code> TMwFHYXLJaRUPeW6421aqXL4ZEzPRFGkGT</li> <li><code>USDJ CErc20Delegate:</code> TYSHTEq9NFSgst94saeRvt6rAYgWkqMFbj</li> <li><code>USDJ CErc20Delegator:</code> TL5x9MtSnDy537FXKx53yAaHRRNdg9TkkA</li> <li><code>USDC:</code> TLZSucJRjnqBKwvQz6n5hd29gbS4P7u7w8</li> <li><code>USDC CErc20Delegate:</code> THQY8YX19jLFSFg1xhthM5wb7xZvKLCzgq</li> <li><code>USDC CErc20Delegator:</code> TNSBA6KvSvMoTqQcEgpVK7VhHT3z7wifxy</li> <li><code>TUSD:</code> TUpMhErZL2fhh4sVNULAbNKLokS4GjC1F4</li> <li><code>TUSD CErc20Delegate:</code> THbrSjDsDA2KJRxx8K73tN7vLgaXSUNQFk</li> <li><code>TUSD CErc20Delegator:</code> TSXv71Fy5XdL3Rh2QfBoUu3NAaM4sMif8R</li> <li><code>BTC:</code> TN3W4H6rK2ce4vX9YnFQHwKENnHjoxb3m9</li> <li><code>BTC CErc20Delegate:</code> TVsKSRgRoMcCp798qqRGesXRfzy2MzRjkR</li> <li><code>BTC CErc20Delegator:</code> TLeEu311Cbw63BcmMHDgDLu7fnk9fqGcqT</li> <li><code>ETHB:</code> TRFe3hT5oYhjSZ6f3ji5FJ7YCfrkWnHRvh</li> <li><code>ETHB CErc20Delegate:</code> TS9fVh58y2RMDnpucGXkbfZhAJxmGafGqe</li> <li><code>ETHB CErc20Delegator:</code> TWBxQMb6RD3qmkXUXpNwVCYbL8SHNreru6</li> <li><code>ETH:</code> THb4CqiFdwNHsWsQCs4JhzwjMWys4aqCbF</li> <li><code>ETH CErc20Delegate:</code> TQBvTVisiceDvsQVbLbcYyWQGWP7wtaQnc</li> <li><code>ETH CErc20Delegator:</code> TR7BUFRQeq1w5jAZf1FKx85SHuX6PfMqsV</li> <li><code>WBTT:</code> TKfjV9RNKJJCqPvBtK8L7Knykh7DNWvnYt</li> <li><code>WBTT CErc20Delegate:</code> TV4WWBqBfn1kd4KmpYeSJpVAfybfrxEN9L</li> <li><code>WBTT CErc20Delegator:</code> TUY54PVeH6WCcYCd6ZXXoBDsHytN9V5PXt</li> <li><code>BUSDOLD:</code> TMz2SWatiAtZVVcH2ebpsbVtYwUPT9EdjH</li> <li><code>BUSDOLD CErc20Delegate:</code> TNRUqbYfYv4iizWa1b2kd6ZBaoh5zrg3yk</li> <li><code>BUSDOLD CErc20Delegator:</code> TLHASseQymmpGQdfAyNjkMXFTJh8nzR2x2</li> <li><code>SUNOLD:</code> TKkeiboTkxXKJpbmVFbv4a8ov5rAfRDMf9</li> <li><code>SUNOLD CErc20Delegate:</code> TSCpzKvJfXHj1HW5jKg9dZA8z9aMxxGLd8</li> <li><code>SUNOLD CErc20Delegator:</code> TGBr8uh9jBVHJhhkwSJvQN2ZAKzVkxDmno</li> </ul> </li> <li> <p>InterestRateModel</p> <ul> <li><code>WhitePaperModelTRX (WhitePaperInterestRateModel):</code> TF8B4iysAGfrssdQhMJGYsdd9SZoxGsH7M</li> <li><code>WhitePaperModelBTC (WhitePaperInterestRateModel):</code> TYJi9q4qLQWoBiKmMQY3Mn81tmhw7SeCmh</li> <li><code>jumpRateTRX (JumpRateModelV2):</code> TMca13trZmVvVttrGWJyUSm33qZdohDDuh</li> <li><code>jumpRateUSDDOLD (JumpRateModelV2):</code> TDoB7y9HHj6bXTwEe6BhfAkdETjQR2He6u</li> <li><code>jumpRateUSDT (JumpRateModelV2):</code> TTetZxp98wcPaciyBMHYvQkS735RZ3tyXY</li> <li><code>jumpRatewstUSDT (JumpRateModelV2):</code> TPqKsaTnSKEU3aGHanpVFNU3cE8SmJsAYz</li> <li><code>jumpRatesTRX (JumpRateModelV2):</code> TW4fpkc98kzVbdiPhutCg2uivwVJ9MDa2P</li> <li><code>jumpRateSUN (JumpRateModelV2):</code> THCVC3DHgZ5qmUcJPutw7TrMMfj1h2bvkZ</li> <li><code>jumpRateBTT (JumpRateModelV2):</code> TQ9zMkrqgej7GjLdMrpNuURozg8J2fSXsW</li> <li><code>jumpRateNFT (JumpRateModelV2):</code> TBE9tkWYdZPEHLNeKC6Xn44YFLpieiM3xq</li> <li><code>jumpRateJST (JumpRateModelV2)</code> TMNXjQTa8x4wNHBa3X647KRnkRQpSuXBRT</li> <li><code>jumpRateWIN (JumpRateModelV2):</code> TBtChPo34CGJkb1QVEwPhxS8HQE2Xp7ir2</li> <li><code>jumpRateUSDJ (JumpRateModelV2):</code> TLScd7kpWnKADtH7ZXKzrJHAxJUnjiiExq</li> <li><code>jumpRateUSDC (JumpRateModelV2):</code> TDECE4PZFEkmTyFk9sJMya9PY99BapHpyP</li> <li><code>jumpRateTUSD (JumpRateModelV2):</code> TLY3wRNGrQpJCZrYKu9VjntMj2kNxisAL2</li> <li><code>jumpRateBTC (JumpRateModelV2):</code> TYJi9q4qLQWoBiKmMQY3Mn81tmhw7SeCmh</li> <li><code>jumpRateETHB (JumpRateModelV2):</code> TD5wmR7NfBM2JdSGSTTq1MgMARX2k5KE2b</li> <li><code>jumpRateWBTT (JumpRateModelV2):</code> TJAfCJdJZa44pG5adQGLMLh27hJqPeLxod</li> <li><code>jumpRateBUSD (JumpRateModelV2):</code> TUSGt1WAYeJSV94M5muFi2KvtE6EquZPUC</li> <li><code>jumpRateSUNOLD (JumpRateModelV2):</code> TK7WVRz34wUVRCpsgbW1wUCPmh5bSnCqg1</li> <li><code>jumpRateETH (JumpRateModelV2):</code> TCiKn6EFBsNrNCFQXWaEuAxr8Su3y4Rx9D</li> </ul> </li> <li> <p>Price Oracle</p> <ul> <li><code>Oracle Price (PriceOracle):</code> TMiNCmvD3zdsv6mk7niBU6NPBzVNjYMQTV</li> <li><code>Oracle Proxy (PriceOracleProxy):</code> TCKp2AzuhzV4B4Ahx1ej4mvQgHZ1kH7F7k</li> </ul> </li> <li> <p>Governance</p> <ul> <li><code>GovernorBravoDelegate:</code> TCiQTkxhzwSeXhRsNdHCvrxHRAvpjQn5Dt</li> <li><code>GovernorBravoDelegator:</code> TEqiF5JbhDPD77yjEfnEMncGRZNDt2uogD</li> <li><code>Timelock:</code> TRWNvb15NmfNKNLhQpxefFz7cNjrYjEw7x</li> </ul> </li> <li> <p>Comptroller</p> <ul> <li><code>Comptroller:</code> TB23wYojvAsSx6gR8ebHiBqwSeABiBMPAr</li> </ul> </li> </ul>"},{"location":"developers/deployed_contracts/#supply-and-borrow-market-v2","title":"Supply and Borrow Market V2","text":"<ul> <li> <p>Moolah Market</p> <ul> <li><code>MoolahProxy:</code> TFgrgsd8c37ByaZx1YxpBzazJS8bHsoP5c</li> </ul> </li> <li> <p>Moolah Vault</p> <ul> <li><code>MoolahVaultFactoryProxy:</code> TYBHjJ5cLnA76mLk6S6cCwUw8kR3r2mSYu</li> <li><code>WtrxVaultProxy:</code> TWxWVxUv6FvJtWELhLmdKWQRf9eMoVs2ki</li> <li><code>UsdtVaultProxy:</code> TXfQWrF4mkq5XFaoRYv3crdhjiKkhdMEx5</li> <li><code>btcVaultProxy:</code> TGNrNvVASdcpbfoLx2qrHB7to9vJgEcr8f</li> <li><code>UsddVaultProxy:</code> TR1iqZZMmHeQSUTsAcV3eWNhKFEuuAMYX9</li> </ul> </li> <li> <p>TRX Provider</p> <ul> <li><code>TrxProviderProxy:</code> TMRZwenUVHPvnxhwDDQLY4SEmmwXvtKRjz</li> </ul> </li> <li> <p>Resilient Oracle</p> <ul> <li><code>ResilientOracleProxy:</code> TFYLvDFSEW6dKSnWb3mt76hkHAgxPktrnG</li> <li><code>TrxOracle:</code> TEMs6dutw4An9wvyCdWAjjCAZasgiSZaLL</li> <li><code>UsdtOracle:</code> TRi3BYkjHWZWdPxH198G3XJHTxnwqPDw5s</li> <li><code>UsddOracle:</code> TWiRfunrLV4ehK9gaV3tU7H8SvDQazF2kk</li> <li><code>StrxOracle:</code> TQ9XK8prfEs7obcKnXPRHvERzYjFjF92WK</li> <li><code>BoundValidatorProxy:</code> TKngbBqSa2Vaz9LLGs37ngpwvCSJj9dbxn</li> </ul> </li> <li> <p>Interest Rate Model</p> <ul> <li><code>IrmProxy:</code> TQYeFiTVNfJ6jfqjyfL2s93VLG1huaMEzC</li> </ul> </li> <li> <p>Liquidatio</p> <ul> <li><code>LiquidatorProxy:</code> TEnkyjNTMdU7K997VveXQDrQGSQTi28cuj</li> <li><code>PublicLiquidatorProxy:</code> TLvPrXHVQCA54gLQjLfoNi5XQ6WqhXCEps</li> <li><code>LendingFeeRecipientProxy:</code> TK9ZnHWK5GMvDsMKocEC22WzKW79fdQMCt</li> </ul> </li> </ul>"},{"location":"developers/deployed_contracts/#staked-trx","title":"Staked TRX","text":"<ul> <li><code>StakedTRX (sTRX):</code> TU3kjFuhtEo42tsCBtfYUAZxoqQ4yuSLQ5</li> </ul>"},{"location":"developers/deployed_contracts/#energy-rental","title":"Energy Rental","text":"<ul> <li><code>EnergyRental:</code> TU2MJ5Veik1LRAgjeSzEdvmDYx7mefJZvd</li> </ul>"},{"location":"developers/energy_rental/","title":"Energy Rental","text":"<p>All transactions on JustLend DAO require Energy, which can only be acquired through staking or burning TRX. This process involves high costs and lengthy procedures. In response, JustLend DAO introduces the Energy Rental service, allowing users to rent Energy at a significantly reduced price compared to staking or burning TRX. The contract EnergyRental used to set up the Energy Rental service.</p>"},{"location":"developers/energy_rental/#prepay-refund","title":"PrePay &amp; Refund","text":"<p>During the energy rental process, a prepayment amount, which includes a deposit and rent, is calculated based on the Rental Amount and Rental Duration. The detailed formula is as follows:</p>      Prepay = trxAmount \u2217 rentalRate \u2217 (durationValueInSeconds + 86400 + liquidateThreshold) + fee  <p>Upon normal termination of the rental, a portion of the deposit will be refunded based on the energy usage. The specific refund calculation formula is as follows:</p>      Refund at least = trxAmount \u2217 rentalRate \u2217 (43200 + liquidateThreshold) + fee"},{"location":"developers/energy_rental/#parameters","title":"Parameters:","text":"<ul> <li>To determine the value of <code>trxAmount</code>, use the following formula:<ul> <li><code>energyAmount:</code> is the amount of energy you are renting (Rental Amount).</li> <li><code>energyStakePerTrx:</code> is the energy staked per in Trx, which can be retrieved by calling the /strx/dashboard API.</li> </ul> </li> </ul>      trxAmount = energyAmount / energyStakePerTrx  <ul> <li><code>durationValueInSeconds:</code> the duration of the energy rental in seconds, calculated by converting the Rental Duration into seconds.</li> <li><code>rentalRate:</code> the borrowing interest rate, which is the rate paid per second by the borrower to the staker, scaled by 10^18.</li> <li><code>liquidateThreshold:</code> the liquidation threshold, which is the remaining rental duration of the user's prepayment, initialized to 0.</li> <li><code>fee:</code> the penalty reserve for liquidation. Users who execute liquidation can receive a liquidation reward calculated as <code>Max(40 TRX, 5% * energyAmount / energyRentPerTrx)</code>, which can be retrieved by calling the /strx/dashboard API. The minimum fee is 40 TRX.</li> </ul> <p>Note: the parameters of <code>rentalRate</code> and <code>liquidateThreshold</code> can be obtained by calling the EnergyRental contract.</p>"},{"location":"developers/energy_rental/#query-interface","title":"Query Interface","text":""},{"location":"developers/energy_rental/#rental-order-information","title":"Rental Order Information","text":"<p>View the information of a rental order. <pre><code>function rentals (address renter, address receiver, uint256 resourceType) public view returns (RentalInfo)\n\nstruct RentalInfo {\n    uint256 amount;\n    uint256 securityDeposit;\n    uint256 rentIndex;\n}\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>renter:</code> order payer;</li> <li><code>receiver:</code> the resource receiver of this rental;</li> <li><code>resourceType:</code> resource type, 0: bandwidth; 1: energy.</li> </ul> </li> <li>Returns:<ul> <li><code>amount:</code> order resources corresponding to the amount of TRX  (delegated TRX amount);</li> <li><code>securityDeposit:</code> order deposit, not updated to current;</li> <li><code>rentIndex:</code> order's global index at the time of its last update.</li> </ul> </li> </ul>"},{"location":"developers/energy_rental/#current-rental-order-information-updated-to-current","title":"Current Rental Order Information (updated to current)","text":"<p>View the information of an rental order, with the returned data updated to current. <pre><code>function getRentInfo (address renter, address receiver, uint256 resourceType) external view returns (uint256, uint256)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>renter:</code> order payer;</li> <li><code>receiver:</code> the resource receiver of this rental;</li> <li><code>resourceType:</code> resource type, 0: bandwidth; 1: energy.</li> </ul> </li> <li>Returns:<ul> <li><code>securityDeposit:</code> order deposit, updated to current\uff1b</li> <li><code>rentIndex:</code> eal-time global index of the order at the time of query.</li> </ul> </li> </ul>"},{"location":"developers/energy_rental/#bad-debt","title":"Bad Debt","text":"<p>If the user's rent is greater than securityDeposit, a bad debt will be generated. This field will be updated when repayment or liquidation occurs. <pre><code>function badDebt() view external returns (uint256)\n</code></pre></p> <ul> <li>Parameter description: N/A;</li> <li>Returns: the amount of bad debt in TRX, minimum unit.</li> </ul>"},{"location":"developers/energy_rental/#covered-bad-debt","title":"Covered Bad Debt","text":"<p>Bad debts will be filled when the collectible rewards (<code>_settleIncome</code>) are updated or the <code>repayBadDebt</code> function is triggered. <pre><code>function badDebtCovered() view external returns (uint256)\n</code></pre></p> <ul> <li>Parameter description: N/A;</li> <li>Returns: the amount of cumulative bad debt has been filled in TRX , minimum unit.</li> </ul>"},{"location":"developers/energy_rental/#bad-debt-to-be-covered","title":"Bad Debt To Be Covered","text":"<p>The amount of bad debt that has not been processed. In fact, this value is equal to  the amount of badDebt minus badDebtCovered. <pre><code>function badDebtGap() view external returns (uint256)\n</code></pre></p> <ul> <li>Parameter description: N/A;</li> <li>Returns: the amount of bad debt to be covered in TRX, minimum unit.</li> </ul>"},{"location":"developers/energy_rental/#total-rent-income","title":"Total Rent Income","text":"<p>Rental income from renting energy. <pre><code>function totalRent() view external returns (uint256)\n</code></pre></p> <ul> <li>Parameter description: N/A;</li> <li>Returns: the amount of total rental income.</li> </ul>"},{"location":"developers/energy_rental/#claimed-rent-income","title":"Claimed Rent Income","text":"<p>The STRX contract can extract the income through the <code>claimRental</code> function, which records the accumulated income that has been extracted. <pre><code>function totalRent() view external returns (uint256)\n</code></pre></p> <ul> <li>Parameter description: N/A;</li> <li>Returns: the amount of accumulate income that has been extracted.</li> </ul>"},{"location":"developers/energy_rental/#liquidation-rate","title":"Liquidation Rate","text":"<p>The <code>liquidateRate</code> is used during liquidation. If the price fluctuates greatly, it will be diluted for 6 hours. Rapidly raised prices will not take effect immediately during the liquidation process. <pre><code>function _liquidateRate(uint256 resourceType) view external returns (uint256)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>resourceType:</code> resource type, 0: bandwidth; 1: energy.</li> </ul> </li> <li>Returns: current liquidation rate.</li> </ul>"},{"location":"developers/energy_rental/#rental-rate","title":"Rental Rate","text":"<p>Get the latest rental rate. when the amount is passed as 0, it returns the current tental rate. When the amount is greater than 0, for example, 100, it returns the rental rate after the energy changes by 100. <pre><code>function _rentalRate(uint256 amount, uint256 resourceType) view external returns (uint256)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>amount:</code> order resources corresponding to the amount of TRX;</li> <li><code>resourceType:</code> resource type, 0: bandwidth; 1: energy.</li> </ul> </li> <li>Returns: current rental rate.</li> </ul>"},{"location":"developers/energy_rental/#write-interface","title":"Write Interface","text":""},{"location":"developers/energy_rental/#rent-resources","title":"Rent Resources","text":"<p>Rent resources, allow amount = 0 (extension only) or msg.value = 0 (no new deposit), both are 0 is not allowed. <pre><code>function rentResource (address receiver, uint256 amount, uint256 resourceType) external payable\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>receiver:</code> the resource receiver of this rental. Not allowed to be a contract or an unactivated account;</li> <li><code>amount:</code> the rent resource corresponding to the amount of TRX (delegated TRX amount), the minimum unit, if the amount is not 0 (renewal only), it must be greater than 1 TRX;</li> <li><code>resourceType:</code> resource type, 0: bandwidth; 1: energy;</li> <li><code>msg.sender:</code> the payer for this rental;</li> <li><code>msg.value:</code> new deposit of this time.</li> </ul> </li> <li>Returns: None, revert on failure.</li> </ul>"},{"location":"developers/energy_rental/#event","title":"Event","text":"<pre><code>RentResource (address indexed renter, address indexed receiver, uint256 addedAmount, uint256 resourceType, uint256 addedSecurityDeposit, uint256 amount)\n</code></pre> <ul> <li>Emits when renting occurs.<ul> <li><code>renter:</code> order payer;</li> <li><code>receiver:</code> the resource receiver of this rental;</li> <li><code>addedAmount:</code> the TRX amount (minimum unit) of the newly-rent resource;</li> <li><code>resourceType:</code> resource type, 0: bandwidth; 1: energy;</li> <li><code>addedSecurityDeposit:</code> the added deposit amount;</li> <li><code>amount:</code> the total amount of rental resources in the order after renting.</li> </ul> </li> </ul>"},{"location":"developers/energy_rental/#return-resources-called-by-payer","title":"Return Resources (called by payer)","text":"<p>Return resources. Return resources in the order (msg.sender, receiver, resourceType). When the remaining deposit is insufficient, all resources will be forcibly emptied, and the remaining deposit will be returned to the order payer. <pre><code>function returnResource (address receiver, uint256 amount, uint256 resourceType) external returns (uint256)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>receiver:</code> the resource receiver of this rental;</li> <li><code>amount:</code> rent resource corresponding to the amount of TRX  (delegated TRX amount), the minimum unit;</li> <li><code>resourceType:</code> resource type, 0: bandwidth; 1: energy;</li> <li><code>msg.sender:</code> resource receiver.</li> </ul> </li> <li>Returns: the amount of the deposit returned in this operation. 0 for a partial return.</li> </ul>"},{"location":"developers/energy_rental/#event_1","title":"Event","text":"<pre><code>ReturnResource( address indexed renter, address indexed receiver, uint256 subedAmount, uint256 resourceType, uint256 usageRental, uint256 subedSecurityDeposit, uint256 amount)\n</code></pre> <ul> <li>Emits when renting occurs.<ul> <li><code>renter:</code> order payer;</li> <li><code>receiver:</code> the resource receiver of this rental;</li> <li><code>subedAmount:</code> the amount of TRX (minimum unit) for returned resources;</li> <li><code>resourceType:</code> resource type, 0: bandwidth; 1: energy;</li> <li><code>usageRental:</code> the cost of recovery for the used resources in the returned resources;</li> <li><code>subedSecurityDeposit:</code> the refunded deposit amount (0 for partial returns);</li> <li><code>amount:</code> the remaining amount of rental resources after returning resources.</li> </ul> </li> </ul>"},{"location":"developers/energy_rental/#return-resources-called-by-receiver","title":"Return resources (called by receiver)","text":"<p>Return resources. Return resources in the order (renter, msg.sender, resourceType). When the remaining deposit is insufficient, all resources will be forcibly emptied, and the remaining deposit will be returned to the order payer. <pre><code>function returnResourceByReceiver (address renter, uint256 amount, uint256 resourceType) external returns (uint256)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>renter:</code> order payer;</li> <li><code>amount:</code> rent resource corresponding to the amount of TRX  (delegated TRX amount), the minimum unit;</li> <li><code>resourceType:</code> resource type, 0: bandwidth; 1: energy;</li> <li><code>msg.sender:</code> resource receiver.</li> </ul> </li> <li>Returns: the amount of the deposit returned in this operation. 0 for partial return.</li> </ul>"},{"location":"developers/energy_rental/#liquidate","title":"Liquidate","text":"<p>When the order deposit is insufficient, the liquidator can liquidate the order, and the liquidator will get the liquidation reward. If there is any remaining deposit, it will be returned to the order payer. <pre><code>function liquidate (address renter, address receiver, uint256 resourceType) external returns (uint256)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>renter:</code> order payer;</li> <li><code>receiver:</code> the resource receiver of this rental;</li> <li><code>resourceType:</code> resource type, 0: bandwidth; 1: energy;</li> <li><code>msg.sender:</code> liquidator.</li> </ul> </li> <li>Returns: Liquidation reward in this operation.</li> </ul>"},{"location":"developers/energy_rental/#event_2","title":"Event","text":"<pre><code>Liquidate( address indexed liquidator, address indexed renter, address indexed receiver, uint256 amount, uint256 resourceType, uint256 usageRental, uint256 liquidateFee, uint256 sendBack)\n</code></pre> <ul> <li>Emits when liquidation occurs.<ul> <li><code>liquidator:</code> the person liquidate the order;</li> <li><code>renter:</code> order payer;</li> <li><code>receiver:</code> the resource receiver of this rental;</li> <li><code>amount:</code> rent resource corresponding to the amount of TRX  (delegated TRX amount), the minimum unit;</li> <li><code>resourceType:</code> resource type, 0: bandwidth; 1: energy;</li> <li><code>usageRental:</code> the fee for the recovery time of the order resource usage;</li> <li><code>liquidateFee:</code> the liquidation reward received by the liquidator;</li> <li><code>sendBack:</code> the remaining deposit received by the payer.</li> </ul> </li> </ul>"},{"location":"developers/staked_trx/","title":"Staked TRX","text":"<p>Based on Stake 2.0, with TRX Liquid Staking, users can stake TRX to get sTRX tokens and gain high rewards. Compared to traditional staking, TRX Liquid Staking is easier to use and more profitable. Staked TRX will be used automatically for voting and governance, and gain rewards via Energy Rental. The contract StakedTRX used to set up the staked TRX service.</p>"},{"location":"developers/staked_trx/#query-interface","title":"Query Interface","text":""},{"location":"developers/staked_trx/#exchange-rate","title":"Exchange Rate","text":"<p>Query the exchange rate between sTRX and TRX. <pre><code>function exchangeRate() public view returns (uint256)\n</code></pre></p> <ul> <li>Parameter description: N/A.</li> <li>Returns: exchange rate, 1 sTRX / 1 TRX exchange rate, scaled by 1e18.</li> </ul>"},{"location":"developers/staked_trx/#total-trx-assets","title":"Total TRX Assets","text":"<p>Query the total TRX assets managed by contract. <pre><code>function totalUnderlying() public view returns (uint256)\n</code></pre></p> <ul> <li>Parameter description: N/A.</li> <li>Returns: the total assets of TRX managed by contract, the minimum unit.</li> </ul>"},{"location":"developers/staked_trx/#user-balance-in-trx","title":"User Balance in TRX","text":"<p>Query the amount of TRX corresponding to the sTRX held by user. <pre><code>function balanceInTrx(address _account) public view returns (uint256)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>_account:</code> the user address.</li> </ul> </li> <li>Returns: the amount of TRX corresponding to the sTRX held by user, the minimum unit.</li> </ul>"},{"location":"developers/staked_trx/#current-unfreezing-round","title":"Current Unfreezing Round","text":"<p>Query the current unfreezing round of the contract. The initial value is 1. <pre><code>function round() view external returns (uint256)\n</code></pre></p> <ul> <li>Parameter description: N/A.</li> <li>Returns: current unfreezing round.</li> </ul>"},{"location":"developers/staked_trx/#claimable-amount-in-trx","title":"Claimable Amount in TRX","text":"<p>The amount of TRX that can be withdrawn after the unfreezing period has expired. <pre><code>function claimable() external returns (uint256)\n</code></pre></p> <ul> <li>Parameter description: N/A.</li> <li>Returns: the amount of TRX that can be claimed.</li> </ul>"},{"location":"developers/staked_trx/#withdrawal-amount-in-trx","title":"Withdrawal Amount in TRX","text":"<p>The amount of TRX being withdrawn. This value is increased when the user withdraws. <pre><code>function withdrawal() external returns (uint256)\n</code></pre></p> <ul> <li>Parameter description: N/A.</li> <li>Returns: the amount of TRX being withdrawn.</li> </ul>"},{"location":"developers/staked_trx/#unfreeze-balance-in-trx","title":"Unfreeze Balance in TRX","text":"<p>The total amount to be unfrozen. If the user withdraws but has not completed the round, it will enter the unfreezing queue. <pre><code>function balanceToUnfreeze() external returns (uint256)\n</code></pre></p> <ul> <li>Parameter description: N/A.</li> <li>Returns: the amount of TRX to be unfrozen, minimum unit.</li> </ul>"},{"location":"developers/staked_trx/#freeze-balance-in-trx","title":"Freeze Balance in TRX","text":"<p>The amount to be frozen. As long as the value is greater than 1 TRX, the freezing operation will be performed. <pre><code>function balanceToFreeze() external returns (uint256)\n</code></pre></p> <ul> <li>Parameter description: N/A.</li> <li>Returns: the amount of TRX to be frozen, minimum unit.</li> </ul>"},{"location":"developers/staked_trx/#write-interface","title":"Write Interface","text":""},{"location":"developers/staked_trx/#deposit-trx","title":"Deposit TRX","text":"<p>Deposit TRX assets and receive sTRX. <pre><code>function deposit() external payable returns (uint256)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>msg.value:</code> the amount of TRX to deposit.</li> </ul> </li> <li>Returns: the amount of sTRX received by user through exchange, the minimum unit.</li> </ul>"},{"location":"developers/staked_trx/#event","title":"Event","text":"<pre><code>Deposit(address user, uint256 trxAmount, uint256 strx, uint256 userHoldStrx)\n</code></pre> <ul> <li>Emits when user successfully deposits TRX.<ul> <li><code>trxAmount:</code> the amount of TRX user deposits;</li> <li><code>strx:</code> the amount of sTRX user gets;</li> <li><code>userHoldStrx:</code> the total amount of sTRX held by user after the deposit.</li> </ul> </li> </ul>"},{"location":"developers/staked_trx/#withdraw-strx","title":"Withdraw sTRX","text":"<p>Specify the amount of sTRX to withdraw, the minimum unit. <pre><code>function withdraw(uint256 tokenAmount) external returns (uint256)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>tokenAmount:</code> the amount of sTRX to withdraw.</li> </ul> </li> <li>Returns: the amount of TRX to be unfrozen when user withdraws, the minimum unit.</li> </ul>"},{"location":"developers/staked_trx/#event_1","title":"Event","text":"<pre><code>Withdraw(address user, uint256 strx, uint256 trxAmount, uint256 userHoldStrx)\n</code></pre> <ul> <li>Emits when user successfully withdraws sTRX.<ul> <li><code>strx:</code> the amount of sTRX user withdraws;</li> <li><code>trxAmount:</code> the amount of TRX user gets;</li> <li><code>userHoldStrx:</code> the total amount of sTRX held by user after the withdrawal.</li> </ul> </li> </ul>"},{"location":"developers/staked_trx/#withdraw-strx-with-the-amount-of-trx-specified","title":"Withdraw sTRX (with the amount of TRX specified)","text":"<p>Specify the amount of TRX user hopes to obtain through withdrawal, the minimum unit. <pre><code>function withdrawExact(uint256 trxAmount) external returns (uint256)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>tokenAmount:</code> the specific amount of sTRX to withdraw.</li> </ul> </li> <li>Returns: the amount of sTRX withdrawn by user, the minimum unit.</li> </ul>"},{"location":"developers/staked_trx/#claim-trx","title":"Claim TRX","text":"<p>Claim the ready-to-be-withdrawn TRX unfrozen in the earliest round. <pre><code>function claim() external returns (uint256)\n</code></pre></p> <ul> <li>Parameter description: N/A.</li> <li>Returns: the amount of TRX claimed by user in the earliest unfreezing round, the minimum unit.</li> </ul>"},{"location":"developers/staked_trx/#event_2","title":"Event","text":"<pre><code>Claim(address user, uint256 trxAmount)\n</code></pre> <ul> <li>Emits when user successfully claims TRX.<ul> <li><code>trxAmount:</code> the amount of TRX user claims.</li> </ul> </li> </ul>"},{"location":"developers/staked_trx/#claim-all-unfrozen-trx","title":"Claim all unfrozen TRX","text":"<p>Claim all ready-to-be-withdrawn, unfrozen TRX <pre><code>function claimAll() external returns (uint256)\n</code></pre></p> <ul> <li>Parameter description: N/A.</li> <li>Returns: the amount of TRX claimed by the user for all expired unfreezing rounds, the minimum unit.</li> </ul>"},{"location":"developers/supply_and_borrow_market/comptroller/","title":"Comptroller","text":"<p>The Comptroller is the risk management module of the JustLend DAO protocol. It determines how much collateral should users keep to avoid liquidation. The Comptroller is implemented as an upgradable contract. The entrance is Unitroller; the implementation is Comptroller.</p> <p><code>Comptroller.sol:</code> allows users to:</p> <ul> <li>Markets</li> <li>Get Assets In</li> <li>Get Account Liquidation</li> <li>Liquidation Incentive</li> </ul> <p>The source code is available on Github.</p>"},{"location":"developers/supply_and_borrow_market/comptroller/#markets","title":"Markets","text":""},{"location":"developers/supply_and_borrow_market/comptroller/#enter-markets","title":"Enter Markets","text":"<p>Calling this method enters a list of markets to supply or borrow. <pre><code>function enterMarkets(address[] memory cTokens) public returns (uint[] memory)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>cTokens:</code> address list of the markets to enter.</li> </ul> </li> <li>Returns: for each market, returns 0 for success, otherwise an error code.</li> </ul>"},{"location":"developers/supply_and_borrow_market/comptroller/#exit-market","title":"Exit Market","text":"<p>Calling this method exits a currently entered market. <pre><code>function exitMarket(address cTokenAddress) external returns (uint)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>cTokenAddress:</code> market address to quit.</li> </ul> </li> <li>Returns: 0 on success, otherwise an error code.</li> </ul>"},{"location":"developers/supply_and_borrow_market/comptroller/#get-assets-in","title":"Get Assets In","text":"<p>Calling this method returns a list of already entered markets. <pre><code>function getAssetsIn(address account) external view returns (CToken[] memory)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>account:</code> the markets this account enters will be returned.</li> </ul> </li> <li>Returns: markets have been entered by the specified address.</li> </ul>"},{"location":"developers/supply_and_borrow_market/comptroller/#markets_1","title":"Markets","text":"<p>Calling this method returns the status of a market(isListed, collateralFactorMantissa, comped) <pre><code>function markets(address cTokenAddress) view returns (bool, uint, bool)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>cTokenAddress:</code> market address.</li> </ul> </li> <li>Returns:<ul> <li><code>isListed:</code> whether recognized by comptroller;</li> <li><code>collateralFactorMantissa:</code> the value can be borrowed(scaled by 1e18);</li> <li><code>comped:</code> whether suppliers &amp; borrowers can get jst dividends.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/comptroller/#collateral-liquidation","title":"Collateral &amp; Liquidation","text":""},{"location":"developers/supply_and_borrow_market/comptroller/#get-account-liquidity","title":"Get Account Liquidity","text":"<p>Calling this method returns the liquidity and shortfall of a user. <pre><code>function getAccountLiquidity(address account) public view returns (uint, uint, uint)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>account:</code> address to be queried.</li> </ul> </li> <li>Returns:<ul> <li><code>error:</code> 0 for success, otherwise an error code;</li> <li><code>liquidity:</code> current liquidity;</li> <li><code>shortfall:</code> the shortfall value of the account's collateral requirement.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/comptroller/#close-factor-mantissa","title":"Close Factor Mantissa","text":"<p>Calling this method gets the percentage of a liquidatable account should repay in a single liquidation. The range is 0%-100%. The calculation result of this method applies to a single asset. <pre><code>function closeFactorMantissa() view returns (uint256)\n</code></pre></p> <ul> <li>Parameter description: N/A.</li> <li>Returns: The close factor, scaled by 1e18.</li> </ul>"},{"location":"developers/supply_and_borrow_market/comptroller/#liquidation-incentive-mantissa","title":"Liquidation Incentive Mantissa","text":"<p>Calling this method gets liquidators' incentives. The incentive is for underwater accounts. Part of this will be given to jToken reserves according to the seize share. <pre><code>function liquidationIncentiveMantissa() view returns (uint256)\n</code></pre></p> <ul> <li>Parameter description: N/A.</li> <li>Returns: The close factor, scaled by 1e18.</li> </ul>"},{"location":"developers/supply_and_borrow_market/governance/","title":"Governance","text":"<p>JustLend DAO protocol is governed and upgraded by JST holders. There are three components included in the governance system: JST(WJST) token, governance module(GovernorBravo) and Timelock. The governance of the JustLend DAO protocol is through proposals, whose process can be summarized as proposal posting-voting-taking effect.</p> <p><code>GovernorBravoDelegate.sol:</code> allows users to:</p> <ul> <li>Propose</li> <li>Queue</li> <li>Execute</li> <li>Cancel</li> <li>Deposit</li> <li>Vote</li> </ul> <p>The source code is available on Github.</p>"},{"location":"developers/supply_and_borrow_market/governance/#proposals","title":"Proposals","text":""},{"location":"developers/supply_and_borrow_market/governance/#propose","title":"Propose","text":"<p>Calling this method creates a proposal to change &amp; update the JustLend DAO protocol. <pre><code>function propose(address[] memory targets, uint[] memory values, string[] memory signatures, bytes[] memory calldatas, string memory description) public returns (uint)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>targets:</code> target addresses for calls to be made during proposal execution;</li> <li><code>values:</code> values to be passed to the calls;</li> <li><code>signatures:</code> function signatures;</li> <li><code>calldatas:</code> data for each function;</li> <li><code>description:</code> a readable message of what exactly the proposal changes.</li> </ul> </li> <li>Returns: the ID of this proposal.</li> </ul>"},{"location":"developers/supply_and_borrow_market/governance/#queue","title":"Queue","text":"<p>Calling this method moves a successful proposal into the Timelock waiting period. The waiting period begins when this method is successfully called. <pre><code>function queue(uint proposalId) public\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>proposalId:</code> ID of the successful proposal.</li> </ul> </li> <li>Returns: None, reverts on error.</li> </ul>"},{"location":"developers/supply_and_borrow_market/governance/#execute","title":"Execute","text":"<p>Calling this method executes the proposal whose waiting period has already been ended. Actions in the proposal will be invoked during the execution. <pre><code>function execute(uint proposalId) public payable\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>proposalId:</code> ID of the proposal to be executed.</li> </ul> </li> <li>Returns: None, reverts on error.</li> </ul>"},{"location":"developers/supply_and_borrow_market/governance/#cancel","title":"Cancel","text":"<p>Calling this function cancels a proposal. A proposal can be cancelled at any time prior to its execution. <pre><code>function cancel(uint proposalId) public\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>proposalId:</code> ID of the proposal to be cancelled.</li> </ul> </li> <li>Returns: None, reverts on error.</li> </ul>"},{"location":"developers/supply_and_borrow_market/governance/#get-actions","title":"Get Actions","text":"<p>Calling this method gets the actions of an exact proposal. <pre><code>function getActions(uint proposalId) public view returns (address[] memory targets, uint[] memory values, string[] memory signatures, bytes[] memory calldatas)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>proposalId:</code> ID of the proposal.</li> </ul> </li> <li>Returns:<ul> <li><code>targets:</code> target addresses for calls to be made during proposal execution;</li> <li><code>values:</code> values to be passed to the calls;</li> <li><code>signatures:</code> function signatures;</li> <li><code>calldatas:</code> data for each function.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/governance/#get-receipt","title":"Get Receipt","text":"<p>Calling this method gets the votes of a specified voter on a proposal. <pre><code>function getReceipt(uint proposalId, address voter) public view returns (Receipt memory)\n\nstruct Receipt {\n    bool hasVoted;\n    bool support;\n    uint256 votes;\n}}\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>proposalId:</code> ID of the proposal.</li> <li><code>voter:</code> address of the specified account.</li> </ul> </li> <li>Returns:<ul> <li><code>hasVoted:</code> voted or not;</li> <li><code>values:</code> for or against;</li> <li><code>signatures:</code> vote count.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/governance/#proposal-state","title":"Proposal State","text":"<p>Calling this method returns the state of a specified proposal. <pre><code>function state(uint proposalId) public view returns (ProposalState)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>proposalId:</code> ID of the specified proposal;</li> </ul> </li> <li>Returns:<ul> <li><code>ProposalState:</code> Pending or Active or Canceled; Defeated or Succeeded or Queued; Expired or Executed.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/governance/#poll-vote","title":"Poll &amp; Vote","text":""},{"location":"developers/supply_and_borrow_market/governance/#deposit","title":"Deposit","text":"<p>Calling this method exchanges JST for WJST at a one-to-one ratio. <pre><code>function deposit(uint256 sad) public\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>sad:</code> number of votes(WJST) to exchange.</li> </ul> </li> <li>Returns: None, reverts on error.</li> </ul>"},{"location":"developers/supply_and_borrow_market/governance/#cast-vote","title":"Cast Vote","text":"<p>Calling this method casts a vote on a proposal. The voting weight will be calculated at the time the proposal's state becomes active. <pre><code>function castVote(uint proposalId, uint votes, bool support) public\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>proposalId:</code> ID of the proposal to vote;</li> <li><code>votes:</code> number of the votes to be cast;</li> <li><code>support:</code> for or against.</li> </ul> </li> <li>Returns: None, reverts on error.</li> </ul>"},{"location":"developers/supply_and_borrow_market/governance/#cast-vote-with-reason","title":"Cast Vote With Reason","text":"<p>Calling this method casts a vote on a proposal. The reason can be submitted simultaneously. <pre><code>function castVoteWithReason(uint proposalId, uint votes, bool support, string calldata reson) public\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>proposalId:</code> ID of the proposal to vote;</li> <li><code>vote:</code> number of the votes to be cast;</li> <li><code>support:</code> for or against;</li> <li><code>reason:</code> voting reason.</li> </ul> </li> <li>Returns: None, reverts on error.</li> </ul>"},{"location":"developers/supply_and_borrow_market/governance/#cast-vote-by-signature","title":"Cast Vote By Signature","text":"<p>Calling this method casts votes on a specified proposal. Comparing with <code>castVote()</code>, this method allows offline signature. <pre><code>function castVoteWithReason(uint proposalId, uint votes, bool support, string calldata reson) public\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>proposalId:</code> ID of the proposal to vote;</li> <li><code>vote:</code> number of the votes to be cast;</li> <li><code>support:</code> for or against;</li> <li><code>v:</code> recover byte of the signature;</li> <li><code>r:</code> half of the ECDSA signature pair;</li> <li><code>s:</code> half of the ECDSA signature pair.</li> </ul> </li> <li>Returns: None, reverts on error.</li> </ul>"},{"location":"developers/supply_and_borrow_market/interest_rate_model/","title":"Interest Rate Model","text":"<p>JustLend DAO's interest rate model aims to maximize the utilization of assets while effectively managing liquidity risks. Therefore, the parameter utilization rate U of each market is particularly important, as it reflects the true situation of the available assets in each market. As the utilization rate approaches 100%, assets become scarce, making borrowing impossible.  Meanwhile, suppliers may be unable to withdraw their liquidity due to the lack of available assets. The formula of the utilization U is defined as:</p>      U = Total Borrows / Total Supply  <p>To calibrate the interest rate model around an optimal utilization rate which reflects the real conditions, JustLend DAO provides variable interest rates for markets through two distinct interest models:</p> <ul> <li><code>WhitePaperInterestRateModel:</code> a simple interest rate model where the borrowing rate is directly tied to the utilization rate;</li> <li><code>JumpRateModelV2::</code> operates differently, as the interest rate jumps to a higher tier when the utilization rate surpasses a certain threshold.</li> </ul>"},{"location":"developers/supply_and_borrow_market/interest_rate_model/#whitepaper-rate-model","title":"Whitepaper Rate Model","text":"<p>The Whitepaper Rate Model is straightforward, as the borrowing rate is directly proportional to the utilization. The interest rate is defined as below.</p>"},{"location":"developers/supply_and_borrow_market/interest_rate_model/#borrow-rate","title":"Borrow Rate:","text":"borrow_rate(u) = a \u2217 u + b  <p>where the borrow utilization rate <code>u</code> is defined as:</p>      u = borrows / (cash + borrows \u2212 reserves)  <ul> <li><code>borrows:</code> the total amount borrowed in the market, denominated in the underlying asset, excluding bad debts;</li> <li><code>cash:</code> the total amount of the underlying asset held by the market at a specific time;</li> <li><code>reserves:</code> the amount of the underlying asset held by the market that is not accessible to borrowers or suppliers, as it is reserved for purposes outlined in the protocol's tokenomics.</li> </ul>"},{"location":"developers/supply_and_borrow_market/interest_rate_model/#supply-rate","title":"Supply Rate:","text":"supply_rate(u) = borrow_rate(u) \u2217 u \u2217 (1 \u2212 reserve_factor)"},{"location":"developers/supply_and_borrow_market/interest_rate_model/#model-parameters","title":"Model Parameters","text":"<ul> <li><code>a:</code> variable interest rate slope;</li> <li><code>b:</code> base rate per block (baseRatePerYear / blocksPerYear);</li> <li><code>reserve_factor:</code> portion of interest income extracted from the protocol.</li> </ul>"},{"location":"developers/supply_and_borrow_market/interest_rate_model/#jump-rate-model","title":"Jump Rate Model","text":"<p>The Jump Rate Model is quite different with the Whitepaper Rate Model, where the interest rate jumps to a higher tier when the utilization rate exceeds U_optional The interest rate is defined as below.</p>"},{"location":"developers/supply_and_borrow_market/interest_rate_model/#borrow-rate_1","title":"Borrow Rate:","text":"<p>if u &lt; kink:</p>      supply_rate(u) = a_1 * u + b  <p>if u &gt;= kink:</p>      supply_rate(u) = a_1 * kink + a_2 * (u - kink) + b  <p>where the borrow utilization rate <code>u</code> is defined as:</p>      u = borrows / (cash + borrows \u2212 reserves)  <ul> <li><code>borrows:</code> the total amount borrowed in the market, denominated in the underlying asset, excluding bad debts.</li> <li><code>cash:</code> the total amount of the underlying asset held by the market at a specific time.</li> <li><code>reserves:</code> the amount of the underlying asset held by the market that is not accessible to borrowers or suppliers, as it is reserved for purposes outlined in the protocol's tokenomics.</li> </ul>"},{"location":"developers/supply_and_borrow_market/interest_rate_model/#supply-rate_1","title":"Supply Rate:","text":"supply_rate(u) = borrow_rate(u) \u2217 u \u2217 (1 \u2212 reserve_factor)"},{"location":"developers/supply_and_borrow_market/interest_rate_model/#model-parameters_1","title":"Model Parameters","text":"<ul> <li><code>a_1:</code> variable interest rate slope1;</li> <li><code>a_2:</code> variable interest rate slope2;</li> <li><code>b:</code> base rate per block (baseRatePerYear / blocksPerYear);</li> <li><code>kink:</code> the utilization point at which the jump multiplier is applied, and the variable interest rate slope shifts from slope1 to slope2;</li> <li><code>reserve_factor:</code> portion of interest income extracted from the protocol.</li> </ul>"},{"location":"developers/supply_and_borrow_market/price_oracle/","title":"Price Oracle","text":"<p>Blockchain-powered smart contracts, by their inherent design, cannot directly access information from external systems. To bridge this critical gap and ensure the integrity of financial operations, the JustLend DAO protocol relies on robust and decentralized price feeds. We use Chainlink Data Feeds as our primary Oracles to secure various markets. JustLend DAO protocol uses a PriceOracle contract to set and display token prices in sun(10^-6 TRX), scaled by 10^(tokenDecimal - 6). Prices of the underlying tokens are posted every 30 minutes via <code>setPrice()</code> by a specified poster.</p> <p><code>SimplePriceOracle.sol:</code> allows users to:</p> <ul> <li>Price Poster</li> <li>Get Asset Price</li> <li>Set Price</li> </ul> <p>The source code is available on Github.</p>"},{"location":"developers/supply_and_borrow_market/price_oracle/#contracts-abi","title":"Contracts ABI","text":""},{"location":"developers/supply_and_borrow_market/price_oracle/#anchor-token-price","title":"Anchor Token Price","text":"<p>Calling this methods returns the current price anchor of a specified token. <pre><code>function anchors(address) view returns(uint256, uint256)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>token:</code> the address of the underlying token(e.g. TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t for USDT).</li> </ul> </li> <li>Returns:<ul> <li><code>period:</code> the current time period. Calculated as: current block height/ 600 (the TRON network produces approx. 600 blocks per 30 mins);</li> <li><code>priceMantissa:</code> token prices in sun(10^-6 TRX), scaled by 10^(tokenDecimal - 6).</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/price_oracle/#price-poster","title":"Price Poster","text":"<p>Calling this methods returns the current price poster. <pre><code>function poster() view returns(address)\n</code></pre></p> <ul> <li>Parameter description: N/A.</li> <li>Returns: Address of the current poster.</li> </ul>"},{"location":"developers/supply_and_borrow_market/price_oracle/#asset-prices","title":"Asset Prices","text":"<p>Calling this method returns the current price of the specified asset. <pre><code>function assetPrices(address asset) public view returns (uint)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>asset:</code> the address of the token to query.</li> </ul> </li> <li>Returns: the current price of the token in sun(10^-6 TRX), scaled by 10^(tokenDecimal - 6).</li> </ul>"},{"location":"developers/supply_and_borrow_market/price_oracle/#get-price","title":"Get Price","text":"<p>Calling this method returns the current price of the specified asset. <pre><code>function getPrice(address asset) public view returns (uint)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>asset:</code> the address of the token to query.</li> </ul> </li> <li>Returns: the current price of the token in sun(10^-6 TRX), scaled by 10^(tokenDecimal - 6).</li> </ul>"},{"location":"developers/supply_and_borrow_market/price_oracle/#set-price-poster-only","title":"Set Price (poster-only)","text":"<p>Calling this methods set a token price for the current time period. <pre><code>function setPrice(address asset, uint requestedPriceMantissa) public returns (uint)\n</code></pre></p> <ul> <li>Parameter description:</li> <li><code>asset:</code> the address of the underlying token (e.g. TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t for USDT);</li> <li><code>requestedPriceMantissa:</code> new price, scaled by 10^27.</li> <li>Returns: 0 for success, otherwise an error code.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/","title":"SBM","text":"<p>The JustLend DAO Supply and Borrow Market (SBM) is a decentralized  liquidity pool where users can participate as suppliers, borrowers or liquidators. Suppliers provide liquidity to a market and can earn interest on the assets provided, where borrowers are able to borrow in a collateralize assets way.</p> <p>The SBM contract is the main user-facing contract. Most user interactions with the JustLend DAO Protocol occur via the Ctoken contract. It exposes the liquidity management methods that can be invoked using either Solidity or Web3 libraries.</p> <p><code>Ctoken.sol:</code> allows users to:</p> <ul> <li>Supply</li> <li>Borrow</li> <li>Withdraw</li> <li>Reapy</li> <li>Liquidation</li> </ul> <p>The source code is available on Github.</p>"},{"location":"developers/supply_and_borrow_market/sbm/#query-interface","title":"Query Interface","text":""},{"location":"developers/supply_and_borrow_market/sbm/#exchangerate","title":"ExchangeRate","text":"<p>Calling this method accrues interest and returns the up-to-date exchange rate. <pre><code>function exchangeRateCurrent() public nonReentrant returns (uint)\n</code></pre></p> <ul> <li>Parameter description: N/A</li> <li>Returns: calculated exchange rate scaled by 1e18.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#get-cash","title":"Get Cash","text":"<p>Calling this method gets the total amount of underlying balance currently available to this market. <pre><code>function getCash() public view returns (uint)\n</code></pre></p> <ul> <li>Parameter description: N/A</li> <li>Returns: The quantity of underlying assets owned by this contract.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#total-borrows","title":"Total Borrows","text":"<p>Calling this method gets the sum of the currently loaned-outs and the accrued interests. <pre><code>function totalBorrowsCurrent() external nonReentrant returns (uint)\n</code></pre></p> <ul> <li>Parameter description: N/A</li> <li>Returns: The total borrows with interest.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#borrow-balance","title":"Borrow Balance","text":"<p>Calling this method accrues interest to the updated borrowIndex and then calculates the account's borrow balance using the updated borrowIndex. <pre><code>function borrowBalanceCurrent(address account) external nonReentrant returns (uint)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>account:</code> the address whose balance should be calculated after updating borrowIndex.</li> </ul> </li> <li>Returns: The total borrows with interest.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#borrow-rate","title":"Borrow Rate","text":"<p>Calling this method gets the current per-block borrow interest rate for this jToken. <pre><code>function borrowRatePerBlock() external view returns (uint)\n</code></pre></p> <ul> <li>Parameter description: N/A</li> <li>Returns: The borrow interest rate per block, scaled by 1e18.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#total-supply","title":"Total Supply","text":"<p>Calling this method gets the total number of tokens in circulation. <pre><code>function totalSupply() external view returns (uint256)\n</code></pre></p> <ul> <li>Parameter description: N/A</li> <li>Returns: The supply of tokens.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#underlying-balance","title":"Underlying Balance","text":"<p>Calling this method gets the underlying balance of the owner. <pre><code>function balanceOfUnderlying(address owner) external returns (uint)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>owner:</code> the address of the account.</li> </ul> </li> <li>Returns: The amount of underlying owned by owner.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#supply-rate","title":"Supply Rate","text":"<p>Calling this method gets the current per-block supply interest rate for this jToken. <pre><code>function supplyRatePerBlock() external view returns (uint)\n</code></pre></p> <ul> <li>Parameter description: N/A</li> <li>Returns: The supply interest rate per block, scaled by 1e18.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#total-reserves","title":"Total Reserves","text":"<p>Calling this method gets the reserves. Reserve represents a portion of historical interest set aside as cash which can be withdrawn or transferred through the protocol's governance. <pre><code>function totalReserves() returns (uint)\n</code></pre></p> <ul> <li>Parameter description: N/A</li> <li>Returns: The total amount of reserves.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#reserve-factor","title":"Reserve Factor","text":"<p>Calling this method gets the current reserve factor. <pre><code>function reserveFactorMantissa() returns (uint)\n</code></pre></p> <ul> <li>Parameter description: N/A</li> <li>Returns: The current reserve factor.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#liquidation-incentive","title":"Liquidation Incentive","text":"<p>By calling the liquidationIncentiveMantissa function of the Unitroller contract, liquidation incentives can be inquired. Liquidators will be given a proportion of the borrower's collateral as an incentive, which is defined as liquidation incentive. This is to encourage liquidators to perform liquidation of underwater accounts. <pre><code>function liquidationIncentiveMantissa() view returns (uint)\n</code></pre></p> <ul> <li>Parameter description: N/A</li> <li>Returns: The liquidationIncentive, scaled by 1e18, is multiplied by the closed borrow amount from the liquidator to determine how much collateral can be seized.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#get-account-liquidity","title":"Get Account Liquidity","text":"<p>By calling the getAccountLiquidity function of the Unitroller contract, account information can be accessed through an account's address to determine whether the account should be liquidated or not. <pre><code>getAccountLiquidity(address account) view returns (uint, uint, uint)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>account:</code> user address.</li> </ul> </li> <li>Returns: The amount of underlying owned by owner.<ul> <li><code>error:</code> error code, 0 means success.</li> <li><code>liquidity:</code> liquidity.</li> <li><code>shortfall:</code> When the value is bigger than 0, the current account does not meet the market requirement for collateralization and needs to be liquidated.</li> </ul> </li> </ul> <p>Note: There should be at most one non-zero value between liquidity and shortfall.</p>"},{"location":"developers/supply_and_borrow_market/sbm/#write-interface","title":"Write Interface","text":""},{"location":"developers/supply_and_borrow_market/sbm/#borrow","title":"Borrow","text":"<p>Calling this method borrows assets from JustLend DAO protocol to the sender's owner address. <pre><code>function borrow(uint borrowAmount) external returns (uint)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>borrowAmount:</code> the amount of the underlying asset to borrow.</li> </ul> </li> <li>Returns: None, reverts on error.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#event","title":"Event","text":"<pre><code>Borrow(address borrower, uint borrowAmount, uint accountBorrows, uint totalBorrows, uint borrowIndex)\n</code></pre> <ul> <li>Emits when user successfully borrow.<ul> <li><code>borrower:</code> address of borrow assets account;</li> <li><code>borrowAmount:</code> the amount of borrowed assets;</li> <li><code>accountBorrows:</code> the account borrow the assets;</li> <li><code>totalBorrows:</code> total borrow assets form the account;</li> <li><code>borrowIndex:</code> the index of this borrow order.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#repayborrow","title":"repayBorrow","text":"<p>Calling this method repays their own borrow. <pre><code>function repayBorrow(uint amount) external payable\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>amount:</code> the amount of the asset to repay.</li> </ul> </li> <li>Returns: None, reverts on error.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#event_1","title":"Event","text":"<pre><code>RepayBorrow(address payer, address borrower, uint repayAmount, uint accountBorrows, uint totalBorrows, uint borrowIndex)\n</code></pre> <ul> <li>Emits when user successfully repay borrow.<ul> <li><code>payer:</code> operate repay borrow;</li> <li><code>borrower:</code> address of borrow assets account;</li> <li><code>repayAmount:</code> the amount of repaid assets;</li> <li><code>accountBorrows:</code> the account borrow the assets;</li> <li><code>totalBorrows:</code> total borrow assets form the account;</li> <li><code>borrowIndex:</code> the index of this borrow order.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#repayborrowbehalf","title":"repayBorrowBehalf","text":"<p>Calling this method repays their own borrow. <pre><code>function repayBorrow(uint amount) external payable\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>borrower:</code> the account with the debt being paid off.</li> <li><code>msg.value:</code> the amount to repay.</li> </ul> </li> <li>Returns: None, reverts on error.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#mint","title":"Mint","text":"<p>Calling this method supplies assets into the market and receives jTokens in exchange. <pre><code>function mint() external payable\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>msg.value:</code> the amount of TRX to supply.</li> </ul> </li> <li>Returns: None, reverts on error.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#event_2","title":"Event","text":"<pre><code>Mint(address minter, uint mintAmount, uint mintTokens)\n</code></pre> <ul> <li>Emits when user successfully mint.<ul> <li><code>minter:</code> operate supply assets into the market;</li> <li><code>mintAmount:</code> the amount of supplied assets;</li> <li><code>mintTokens:</code> the tokens need to mint.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#redeem","title":"Redeem","text":"<p>Calling this method redeems jTokens in exchange for the underlying asset and accrues interest whether or not the operation succeeds. <pre><code>function redeem(uint redeemTokens) external returns (uint)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>redeemTokens:</code>  the number of jTokens to redeem into underlying.</li> </ul> </li> <li>Returns: 0 for success, reverts on error.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#event_3","title":"Event","text":"<pre><code>Redeem(address redeemer, uint redeemAmount, uint redeemTokens)\n</code></pre> <ul> <li>Emits when user successfully redeem.<ul> <li><code>redeemer:</code> operate redeem jTokens;</li> <li><code>redeemAmount:</code> the amount of redeem assets;</li> <li><code>redeemTokens:</code> the tokens need to redeem.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#redeemunderlying","title":"RedeemUnderlying","text":"<p>Calling this method redeems jTokens in exchange for a specified amount of underlying asset. <pre><code>function redeemUnderlying(uint redeemAmount) external returns (uint)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>redeemAmount:</code> the amount of underlying to redeem.</li> </ul> </li> <li>Returns: 0 for success, reverts on error.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#transfer","title":"Transfer","text":"<p>Calling this method transfers a specified amount of jtokens to the destination. This action will fail if the account's liquidity become negative due to the transfer. <pre><code>function transfer(address dst, uint256 amount) external nonReentrant returns (bool)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>dst:</code> the receiver's address.</li> <li><code>amount:</code> amount of token to be transferred.</li> </ul> </li> <li>Returns: A boolean value indicating whether or not the transfer succeeded.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#liquidate-borrowjtrc20","title":"Liquidate Borrow\uff08jTrc20\uff09","text":"<p>By calling liquidateBorrow function of the corresponding jTrc20 contract (e.g. jUSDT), accounts whose liquidity does not meet the market requirement for collateralization will be liquidated by other users to restore the account liquidity to a normal level (i.e. higher than the market requirement for collateralization). In the event of liquidation, liquidators may repay part or 50% of the loan for the borrower. Liquidators will be given a proportion of the borrower's collateral as an incentive. <pre><code>function liquidateBorrow(address borrower, uint repayAmount, address jTokenCollateral) returns (uint)\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>borrower:</code> address of a liquidated account.</li> <li><code>repayAmount:</code> amount of token to be repaid in the event of liquidation (measured in the borrowed asset).</li> <li><code>jTokenCollateral:</code> address of the jTOKEN contract to set aside the collateralized asset of a borrower.</li> </ul> </li> <li>Returns: 0 on success, otherwise an Error code.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#liquidate-borrowjtrx","title":"Liquidate Borrow\uff08jTRX\uff09","text":"<p>By calling the liquidateBorrow function of the jTRX contract, accounts whose liquidity does not meet the market requirement for collateralization will be liquidated by other users to restore the account liquidity to a normal level (i.e., higher than the market requirement for collateralization). In the event of liquidation, liquidators may repay part or 50% of the loan for the borrower. Liquidators will be given a proportion of the borrower's collateral as an incentive. <pre><code>function liquidateBorrow(address borrower, address jTokenCollateral) payable\n</code></pre></p> <ul> <li>Parameter description:<ul> <li><code>borrower:</code> address of a liquidated account.</li> <li><code>jTokenCollateral:</code> address of the jTRX contract to set aside the collateralized asset of a borrower.</li> <li><code>msg.value:</code> amount of TRX to be repaid in the event of liquidation.</li> </ul> </li> <li>Returns: No return. If any error occurs, the transaction will be reverted.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#event_4","title":"Event","text":"<pre><code>LiquidateBorrow(address liquidator, address borrower, uint repayAmount, address cTokenCollateral, uint seizeTokens)\n</code></pre> <ul> <li>Emits when user successfully liquidate borrow order.<ul> <li><code>liquidator:</code> operate liquidation;</li> <li><code>borrower:</code> address of a liquidated account;</li> <li><code>repayAmount:</code> the amount of repaid assets;</li> <li><code>cTokenCollateral:</code> address of the jTRX contract to set aside the collateralized asset of a borrower\uff1b</li> <li><code>seizeTokens:</code> the tokens need to be liquidated.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbm/#error-code-and-failure-info","title":"Error Code And Failure info","text":""},{"location":"developers/supply_and_borrow_market/sbm/#error-code","title":"Error code","text":"Code Name Description 0 NO_ERROR Not a failure. 1 UNAUTHORIZED The sender is not authorized to perform this action. 2 BAD_INPUT An invalid argument was supplied by the caller. 3 COMPTROLLER_REJECTION The action would violate the comptroller policy. 4 COMPTROLLER_CALCULATION_ERROR An internal calculation has failed in the comptroller. 5 INTEREST_RATE_MODEL_ERROR The interest rate model returned an invalid value. 6 INVALID_ACCOUNT_PAIR The specified combination of accounts is invalid. 7 INVALID_CLOSE_AMOUNT_REQUESTED The amount to liquidate is invalid. 8 INVALID_COLLATERAL_FACTOR The collateral factor is invalid. 9 MATH_ERROR A math calculation error occurred. 10 MARKET_NOT_FRESH Interest has not been properly accrued. 11 MARKET_NOT_LISTED The market is not currently listed by its comptroller. 12 TOKEN_INSUFFICIENT_ALLOWANCE ERC-20 contract must allow Money Market contract to call transferFrom. The current allowance is either 0 or less than the requested supply, repayBorrow or liquidate amount. 13 TOKEN_INSUFFICIENT_BALANCE Caller does not have sufficient balance in the ERC-20 contract to complete the desired action. 14 TOKEN_INSUFFICIENT_CASH The market does not have a sufficient cash balance to complete the transaction. You may attempt this transaction again later. 15 TOKEN_TRANSFER_IN_FAILED Failure in ERC-20 when transfering token into the market. 16 TOKEN_TRANSFER_OUT_FAILED Failure in ERC-20 when transfering token out of the market."},{"location":"developers/supply_and_borrow_market/sbm/#failure-info","title":"Failure info","text":"Code Name 0 ACCEPT_ADMIN_PENDING_ADMIN_CHECK 1 ACCRUE_INTEREST_ACCUMULATED_INTEREST_CALCULATION_FAILED 2 ACCRUE_INTEREST_BORROW_RATE_CALCULATION_FAILED 3 ACCRUE_INTEREST_NEW_BORROW_INDEX_CALCULATION_FAILED 4 ACCRUE_INTEREST_NEW_TOTAL_BORROWS_CALCULATION_FAILED 5 ACCRUE_INTEREST_NEW_TOTAL_RESERVES_CALCULATION_FAILED 6 ACCRUE_INTEREST_SIMPLE_INTEREST_FACTOR_CALCULATION_FAILED 7 BORROW_ACCUMULATED_BALANCE_CALCULATION_FAILED 8 BORROW_ACCRUE_INTEREST_FAILED 9 BORROW_CASH_NOT_AVAILABLE 10 BORROW_FRESHNESS_CHECK 11 BORROW_NEW_TOTAL_BALANCE_CALCULATION_FAILED 12 BORROW_NEW_ACCOUNT_BORROW_BALANCE_CALCULATION_FAILED 13 BORROW_MARKET_NOT_LISTED 14 BORROW_COMPTROLLER_REJECTION 15 LIQUIDATE_ACCRUE_BORROW_INTEREST_FAILED 16 LIQUIDATE_ACCRUE_COLLATERAL_INTEREST_FAILED 17 LIQUIDATE_COLLATERAL_FRESHNESS_CHECK 18 LIQUIDATE_COMPTROLLER_REJECTION 19 LIQUIDATE_COMPTROLLER_CALCULATE_AMOUNT_SEIZE_FAILED 20 LIQUIDATE_CLOSE_AMOUNT_IS_UINT_MAX 21 LIQUIDATE_CLOSE_AMOUNT_IS_ZERO 22 LIQUIDATE_FRESHNESS_CHECK 23 LIQUIDATE_LIQUIDATOR_IS_BORROWER 24 LIQUIDATE_REPAY_BORROW_FRESH_FAILED 25 LIQUIDATE_SEIZE_BALANCE_INCREMENT_FAILED 26 LIQUIDATE_SEIZE_BALANCE_DECREMENT_FAILED 27 LIQUIDATE_SEIZE_COMPTROLLER_REJECTION 28 LIQUIDATE_SEIZE_LIQUIDATOR_IS_BORROWER 29 LIQUIDATE_SEIZE_TOO_MUCH 30 MINT_ACCRUE_INTEREST_FAILED 31 MINT_COMPTROLLER_REJECTION 32 MINT_EXCHANGE_CALCULATION_FAILED 33 MINT_EXCHANGE_RATE_READ_FAILED 34 MINT_FRESHNESS_CHECK 35 MINT_NEW_ACCOUNT_BALANCE_CALCULATION_FAILED 36 AMINT_NEW_TOTAL_SUPPLY_CALCULATION_FAILED 37 MINT_TRANSFER_IN_FAILED 38 MINT_TRANSFER_IN_NOT_POSSIBLE 39 REDEEM_ACCRUE_INTEREST_FAILED 40 REDEEM_COMPTROLLER_REJECTION 41 REDEEM_EXCHANGE_TOKENS_CALCULATION_FAILED 42 REDEEM_EXCHANGE_AMOUNT_CALCULATION_FAILED 43 REDEEM_EXCHANGE_RATE_READ_FAILED 44 REDEEM_FRESHNESS_CHECK 45 REDEEM_NEW_ACCOUNT_BALANCE_CALCULATION_FAILED 46 REDEEM_NEW_TOTAL_SUPPLY_CALCULATION_FAILED 47 REDEEM_TRANSFER_OUT_NOT_POSSIBLE 48 REDUCE_RESERVES_ACCRUE_INTEREST_FAILED 49 REDUCE_RESERVES_ADMIN_CHECK 50 REDUCE_RESERVES_CASH_NOT_AVAILABLE 51 REDUCE_RESERVES_FRESH_CHECK 52 REDUCE_RESERVES_VALIDATION 53 REPAY_BEHALF_ACCRUE_INTEREST_FAILED 54 REPAY_BORROW_ACCRUE_INTEREST_FAILED 55 REPAY_BORROW_ACCUMULATED_BALANCE_CALCULATION_FAILED 56 REPAY_BORROW_COMPTROLLER_REJECTION 57 REPAY_BORROW_FRESHNESS_CHECK 58 REPAY_BORROW_NEW_ACCOUNT_BORROW_BALANCE_CALCULATION_FAILED 59 REPAY_BORROW_NEW_TOTAL_BALANCE_CALCULATION_FAILED 60 REPAY_BORROW_TRANSFER_IN_NOT_POSSIBLE 61 SET_COLLATERAL_FACTOR_OWNER_CHECK 62 SET_COLLATERAL_FACTOR_VALIDATION 63 SET_COMPTROLLER_OWNER_CHECK 64 SET_INTEREST_RATE_MODEL_ACCRUE_INTEREST_FAILED 65 SET_INTEREST_RATE_MODEL_FRESH_CHECK 66 SET_INTEREST_RATE_MODEL_OWNER_CHECK 67 SET_MAX_ASSETS_OWNER_CHECK 68 SET_ORACLE_MARKET_NOT_LISTED 69 SET_PENDING_ADMIN_OWNER_CHECK 70 SET_RESERVE_FACTOR_ACCRUE_INTEREST_FAILED 71 SET_RESERVE_FACTOR_ADMIN_CHECK 72 SET_RESERVE_FACTOR_FRESH_CHECK 73 SET_RESERVE_FACTOR_BOUNDS_CHECK 74 TRANSFER_COMPTROLLER_REJECTION 75 TRANSFER_NOT_ALLOWED 76 TRANSFER_NOT_ENOUGH 77 TRANSFER_TOO_MUCH"},{"location":"developers/supply_and_borrow_market/sbmV2/","title":"SBM V2","text":"<p>JustLend DAO SBM V2 is a fully upgraded decentralized lending protocol built on the TRON network. It introduces a dual-layer isolated-collateral lending protocol composed of Vaults and Markets, along with an Adaptive Curve Interest Rate Model (IRM) for dynamic rate adjustment. The SBM V2 system primarily consists of several core smart contracts \u2014 Moolah Market, Moolah Vault, TRX Provider, Resilient Oracle, and Interest Rate Model \u2014 each serving a distinct purpose within the ecosystem:</p> <ul> <li>Moolah Market handles core lending and borrowing operations, including supply, withdrawal, collateral management, and liquidation. MoolahMarket.sol allows users to:<ul> <li>Supply</li> <li>Withdraw</li> <li>Borrow</li> <li>Repay</li> <li>Supply Collateral</li> <li>Withdraw Collateral</li> <li>Liquidation</li> </ul> </li> <li>Moolah Vault manages pooled user assets, allocates funds to lending markets, and issues transferable shares following the ERC-4626 standard. MoolahVault.sol allows users to:<ul> <li>Vault Creation</li> <li>Deposit</li> <li>Mint</li> <li>Withdraw</li> </ul> </li> <li>TRX Provider enables seamless interaction between native TRX and wrapped TRX (WTRX), allowing users to supply or borrow using TRX directly. TRXProvider.sol allows users to:<ul> <li>Deposit</li> <li>Mint</li> <li>Withdraw</li> <li>Redeem</li> <li>Borrow</li> <li>Repay</li> <li>Supply Collateral</li> <li>Withdraw Collateral</li> </ul> </li> <li>Resilient Oracle aggregates multiple price feeds (up to three per token) to ensure reliable and accurate price data for the protocol. </li> <li>Interest Rate Model (IRM) dynamically adjusts borrowing and supply rates in real time to maintain market utilization near the optimal level. </li> </ul> <p>The source code is available on Github.</p> <p></p>"},{"location":"developers/supply_and_borrow_market/sbmV2/#configuration","title":"Configuration","text":""},{"location":"developers/supply_and_borrow_market/sbmV2/#1-position","title":"1. Position","text":"<p>In each market, every user has a corresponding Position, which records the user\u2019s supplied, borrowed, and collateralized assets within that market. <pre><code>struct Position {\n  uint256 supplyShares;\n  uint128 borrowShares;\n  uint128 collateral;\n}\n</code></pre></p> <ul> <li><code>supplyShares:</code> the number of shares representing the assets a user has supplied to the market.</li> <li><code>borrowShares:</code> the number of shares representing the assets a user has borrowed from the market.</li> <li><code>collateral:</code> the amount of assets a user has deposited as collateral in the market.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#2-market","title":"2. Market","text":"<pre><code>struct Market {\n  uint128 totalSupplyAssets;\n  uint128 totalSupplyShares;\n  uint128 totalBorrowAssets;\n  uint128 totalBorrowShares;\n  uint128 lastUpdate;\n  uint128 fee;\n}\n</code></pre> <ul> <li><code>totalSupplyAssets:</code> the total amount of assets supplied to the market and available for lending.</li> <li><code>totalSupplyShares:</code> the total number of supply shares in the market.</li> <li><code>totalBorrowAssets:</code> the total amount of assets borrowed from the market.</li> <li><code>totalBorrowShares:</code> the total number of borrowed shares in the market.</li> <li><code>lastUpdate:</code> the timestamp of the last market state update.</li> <li><code>fee:</code> the fee rate charged by the market.</li> </ul> <p>Relationship between assets and shares: At the beginning, one token corresponds to one share. Over time, as the market generates interest income, the total amount of tokens increases while the total number of shares remains constant. Consequently, each share becomes redeemable for more tokens, allowing users to earn yield when they withdraw their funds.</p>"},{"location":"developers/supply_and_borrow_market/sbmV2/#3-marketparams","title":"3. MarketParams","text":"<pre><code>struct MarketParams {\n  address loanToken;\n  address collateralToken;\n  address oracle;\n  address irm;\n  uint256 lltv;\n}\n</code></pre> <ul> <li><code>loanToken:</code> the address of the token used for borrowing.</li> <li><code>collateralToken:</code> the address of the token used as collateral.</li> <li><code>oracle:</code> the address of the price oracle contract.</li> <li><code>irm:</code> the address of the interest rate model contract.</li> <li><code>lltv:</code> the loan-to-value ratio (LTV) that determines the maximum borrowing limit based on the collateral value.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#4-marketconfig","title":"4. MarketConfig","text":"<p>Represents the configuration of each market within the vault. <pre><code>struct MarketConfig {\n  uint176 cap;\n  bool enabled;\n  MarketType marketType;\n  uint64 removableAt;\n}\n</code></pre></p> <ul> <li><code>cap:</code> the maximum amount of assets that the vault can supply to this market.</li> <li><code>enabled:</code> indicates whether the market is active; serves as a switch to control whether investments can be made to the market.</li> <li><code>marketType:</code> the type of the market. This is used for compatibility with other lending protocols. Currently, only the Moolah market type is supported.</li> <li><code>removableAt:</code> a timestamp indicating when the market can be immediately removed from the withdrawal queue.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#5-marketallocation","title":"5. MarketAllocation","text":"<p>Used when reallocating asset investments across different markets. <pre><code>struct MarketAllocation {\n  MarketParams marketParams;\n  uint256 assets;\n}\n</code></pre></p> <ul> <li><code>marketParams:</code> specifies the target market to which the allocation is applied.</li> <li><code>assets:</code> the amount of assets allocated to the specified market.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#6-authorization","title":"6. Authorization","text":"<p>The Authorization struct represents the data required to grant or revoke authorization for a specific address. <pre><code>struct Authorization {\n    address authorizer;   \n    address authorized;   \n    bool isAuthorized;   \n    uint256 nonce;        \n    uint256 deadline;    \n}\n</code></pre></p> <ul> <li><code>authorizer:</code> the address that is granting authorization or revocation.</li> <li><code>authorized:</code> the address that is being granted or revoked the authorization.</li> <li><code>isAuthorized:</code> a boolean indicating whether the authorization is being granted (true) or revoked (false).</li> <li><code>nonce:</code> a unique number to prevent replay attacks. This value must be incremented each time a new authorization is signed.</li> <li><code>deadline:</code> a timestamp indicating when the authorization will expire. If the current block timestamp exceeds this value, the authorization is no longer valid.</li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#7-signature","title":"7. Signature","text":"<p>The Signature struct represents the ECDSA (Elliptic Curve Digital Signature Algorithm) signature used to verify that a particular authorization was signed by the authorizer. <pre><code>struct Signature {\n    uint8 v;    \n    bytes32 r;    \n    bytes32 s;   \n}\n</code></pre></p> <ul> <li><code>v:</code> the recovery id (0 or 1) used to recover the public key from the signature. It indicates which of the two possible curve points was used for signing.</li> <li><code>r:</code> the \"r\" component of the ECDSA signature, which is derived from the elliptic curve.</li> <li><code>s:</code> the \"s\" component of the ECDSA signature, which is another part of the signature that helps uniquely identify it.</li> </ul> <p></p>"},{"location":"developers/supply_and_borrow_market/sbmV2/#contracts-abi","title":"Contracts ABI","text":""},{"location":"developers/supply_and_borrow_market/sbmV2/#moolah-market","title":"Moolah Market","text":"<p>The JustLend DAO V2 market adopts an isolated-collateral lending protocol, where each market consists of a single collateral asset paired with a single borrowable asset. All markets are managed within the Moolah contract. Each market is uniquely identified by a Market ID, which is composed of the borrowable asset, collateral asset, oracle, interest rate model, and liquidation factor.</p>"},{"location":"developers/supply_and_borrow_market/sbmV2/#1-supply","title":"1. Supply","text":"<p>The supply function allows users to provide liquidity to the market for lending. <pre><code>function supply(MarketParams memory marketParams, uint256 assets, uint256 shares, address onBehalf, bytes calldata data) external returns (uint256 assetsSupplied, uint256 sharesSupplied)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>marketParams:</code> the configuration parameters of the target market (includes loan token, collateral token, oracle, interest rate model, and LTV ratio).</li> <li><code>assets:</code> the amount of tokens the user wants to supply to the market.</li> <li><code>shares:</code> the number of supply shares to mint corresponding to the deposited assets.</li> <li><code>onBehalf:</code> the address that will receive the supply shares. This allows users to supply assets on behalf of another account.</li> <li><code>data:</code> additional encoded data for interaction logic or integrations.</li> </ul> </li> <li> <p>Returns:</p> <ul> <li><code>assetsSupplied:</code> the actual amount of tokens supplied.</li> <li><code>sharesSupplied:</code> the actual number of supply shares minted corresponding to the supplied assets.</li> </ul> </li> </ul> <p>Event <pre><code>Supply(Id indexed id, address indexed caller, address indexed onBehalf, uint256 assets, uint256 shares)\n</code></pre></p> <ul> <li>This event is emitted when assets are supplied to a market.<ul> <li><code>id:</code> the unique market identifier (bytes32), representing the market where the supply occurred.</li> <li><code>caller:</code> the address that submitted the transaction.</li> <li><code>onBehalf:</code> the address on whose behalf the assets were supplied, the supply shares are credited to this address.</li> <li><code>assets:</code> the amount of tokens supplied to the market.</li> <li><code>shares:</code> the number of supply shares minted corresponding to the supplied assets.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#2-withdraw","title":"2. Withdraw","text":"<p>The withdraw  function allows users to withdraw the previously supplied liquidity from the market. <pre><code>function withdraw(MarketParams memory marketParams, uint256 assets, uint256 shares, address onBehalf, address receiver) external returns (uint256 assetsWithdrawn, uint256 sharesWithdrawn)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>marketParams:</code> the configuration parameters of the target market (includes loan token, collateral token, oracle, interest rate model, and LTV ratio).</li> <li><code>assets:</code> the amount of tokens to withdraw from the market.</li> <li><code>shares:</code> the number of supply shares to redeem for the corresponding assets.</li> <li><code>onBehalf:</code> the address whose position will be reduced. This enables withdrawals to be made on behalf of another account.</li> <li><code>receiver:</code> the address that will receive the withdrawn assets.</li> </ul> </li> <li> <p>Returns:</p> <ul> <li><code>assetsWithdrawn:</code> the actual amount of tokens supplied.</li> <li><code>sharesWithdrawn:</code> the actual number of shares burned corresponding to the withdrawn assets.</li> </ul> </li> </ul> <p>Event <pre><code>Withdraw(Id indexed id, address caller, address indexed onBehalf, address indexed receiver, uint256 assets, uint256 shares)\n</code></pre></p> <ul> <li>This event is emitted when assets are withdrawn from a market.<ul> <li><code>id:</code> the unique market identifier (bytes32), representing the market from which the withdrawal occurred.</li> <li><code>caller:</code> the address that submitted the transaction.</li> <li><code>onBehalf:</code> the address whose supply shares are being withdrawn.</li> <li><code>receiver:</code> the address that receives the withdrawn assets.</li> <li><code>assets:</code> the amount of tokens withdrawn from the market.</li> <li><code>shares:</code> the number of supply shares redeemed corresponding to the withdrawn assets.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#3-borrow","title":"3. Borrow","text":"<p>The borrow function allows users to borrow funds from the SBM V2 market. <pre><code>function borrow(MarketParams memory marketParams, uint256 assets, uint256 shares, address onBehalf, address receiver) returns (uint256 assetsBorrowed, uint256 sharesBorrowed)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>marketParams:</code> the configuration parameters of the target market (includes loan token, collateral token, oracle, interest rate model, and LTV ratio).</li> <li><code>assets:</code> the amount of tokens the user intends to borrow from the market.</li> <li><code>shares:</code> the number of borrowing shares to mint corresponding to the borrowed assets.</li> <li><code>onBehalf:</code> the address whose position will be increased. This allows borrowing on behalf of another account.</li> <li><code>receiver:</code> the address that will receive the borrowed assets.</li> </ul> </li> <li> <p>Returns:</p> <ul> <li><code>assetsBorrowed:</code> the actual amount of tokens borrowed.</li> <li><code>sharesBorrowed:</code> the actual number of shares minted corresponding to the borrowed tokens.</li> </ul> </li> </ul> <p>Event <pre><code>Borrow(Id indexed id, address caller, address indexed onBehalf, address indexed receiver, uint256 assets, uint256 shares)\n</code></pre></p> <ul> <li>This event is emitted when assets are borrowed from a market.<ul> <li><code>id:</code> the unique market identifier (bytes32), representing the market from which the borrowing occurred.</li> <li><code>caller:</code> the address that submitted the transaction.</li> <li><code>onBehalf:</code> the address whose borrowed shares are recorded.</li> <li><code>receiver:</code> the address that receives the borrowed assets.</li> <li><code>assets:</code> the amount of tokens borrowed from the market.</li> <li><code>shares:</code> the number of borrowed shares corresponding to the borrowed assets.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#4-repay","title":"4. Repay","text":"<p>The repay function allows users to repay the funds borrowed from the SBM V2 market. <pre><code>function repay(MarketParams memory marketParams, uint256 assets, uint256 shares, address onBehalf, bytes calldata data) external returns (uint256 assetsRepaid, uint256 sharesRepaid)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>marketParams:</code> the configuration parameters of the target market (includes loan token, collateral token, oracle, interest rate model, and LTV ratio).</li> <li><code>assets:</code> the amount of tokens to repay to the market.</li> <li><code>shares:</code> the number of borrowing shares to burn corresponding to the repaid assets.</li> <li><code>onBehalf:</code> the address whose borrowing position will be reduced. This enables repayments to be made on behalf of another account.</li> <li><code>data:</code> additional encoded data for interaction logic or integrations.</li> </ul> </li> <li> <p>Returns:</p> <ul> <li><code>assetsRepaid:</code> the actual amount of tokens repaid.</li> <li><code>sharesRepaid:</code> the actual number of shares repaid corresponding to the repaid tokens.</li> </ul> </li> </ul> <p>Event <pre><code>Repay(Id indexed id, address indexed caller, address indexed onBehalf, uint256 assets, uint256 shares)\n</code></pre></p> <ul> <li>This event is emitted when borrowed assets are repaid to the market.<ul> <li><code>id:</code> the unique market identifier (bytes32), representing the market where the repayment occurred.</li> <li><code>caller:</code> the address that submitted the transaction.</li> <li><code>onBehalf:</code> the address whose borrowed assets are being repaid.</li> <li><code>assets:</code> the amount of tokens repaid to the market.</li> <li><code>shares:</code> the number of borrowed shares corresponding to the repaid assets.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#5-supply-collateral","title":"5. Supply Collateral","text":"<p>The supply collateral function allows users to supply collateral assets to the SBM V2 market. <pre><code>function supplyCollateral(MarketParams memory marketParams, uint256 assets, address onBehalf, bytes calldata data)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>marketParams:</code> the configuration parameters of the target market (includes loan token, collateral token, oracle, interest rate model, and LTV ratio).</li> <li><code>assets:</code> the amount of collateral tokens to deposit into the market.</li> <li><code>onBehalf:</code> the address whose collateral position will be increased. This allows users to add collateral on behalf of another account.</li> <li><code>data:</code> additional encoded data for interaction logic or integrations.</li> </ul> </li> <li> <p>Returns: None, reverts on error.</p> </li> </ul> <p>Event <pre><code>SupplyCollateral(Id indexed id, address indexed caller, address indexed onBehalf, uint256 assets)\n</code></pre></p> <ul> <li>This event is emitted when collateral is supplied to the market.<ul> <li><code>id:</code> the unique market identifier (bytes32), representing the market where the collateral is supplied.</li> <li><code>caller:</code> the address that submitted the transaction.</li> <li><code>onBehalf:</code> the address whose collateral balance is credited.</li> <li><code>assets:</code> the amount of collateral tokens supplied to the market.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#6-withdraw-collateral","title":"6. Withdraw Collateral","text":"<p>The withdraw collateral function allows users to withdraw their previously supplied collateral from the SBM V2 market. <pre><code>function withdrawCollateral(MarketParams memory marketParams, uint256 assets, address onBehalf, address receiver)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>marketParams:</code> the configuration parameters of the target market (includes loan token, collateral token, oracle, interest rate model, and LTV ratio).</li> <li><code>assets:</code> the amount of collateral tokens to withdraw from the market.</li> <li><code>onBehalf:</code> the address whose collateral position will be reduced. This allows collateral to be withdrawn on behalf of another account.</li> <li><code>receiver:</code> the address that will receive the withdrawn collateral assets.</li> </ul> </li> <li> <p>Returns: None, reverts on error.</p> </li> </ul> <p>Event <pre><code>WithdrawCollateral(Id indexed id, address caller, address indexed onBehalf, address indexed receiver, uint256 assets)\n</code></pre></p> <ul> <li>This event is emitted when collateral is withdrawn from the market.<ul> <li><code>id:</code> the unique market identifier (bytes32), representing the market where the collateral is withdrawn.</li> <li><code>caller:</code> the address that submitted the transaction.</li> <li><code>onBehalf:</code> the address whose collateral balance is reduced.</li> <li><code>receiver:</code> the address that receives the withdrawn collateral assets.</li> <li><code>assets:</code> the amount of collateral tokens withdrawn from the market.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#7-liquidate","title":"7. Liquidate","text":"<p>The liquidate function allows liquidators to repay a portion of a borrower's debt in exchange for seizing the borrower's collateral when their position becomes undercollateralized. <pre><code>function liquidate(MarketParams memory marketParams, address borrower, uint256 seizedAssets, uint256 repaidShares, bytes calldata data) external returns(uint256 seizedAssets, uint256 repaidAssets)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>marketParams:</code> the configuration parameters of the target market (includes loan token, collateral token, oracle, interest rate model, and LTV ratio).</li> <li><code>borrower:</code> the address of the user whose position is being liquidated.</li> <li><code>seizedAssets:</code> the amount of collateral assets to be seized from the borrower.</li> <li><code>repaidShares:</code> the number of borrowing shares repaid on behalf of the borrower.</li> <li><code>data:</code> additional encoded data for custom liquidation logic or integrations.</li> </ul> </li> <li> <p>Returns:</p> <ul> <li><code>seizedAssets:</code> the actual amount of collateral tokens seized.</li> <li><code>repaidAssets:</code> the actual amount of debt tokens repaid.</li> </ul> </li> </ul> <p>Event <pre><code>Liquidate(Id indexed id, address indexed caller, address indexed borrower, uint256 repaidAssets, uint256 repaidShares, uint256 seizedAssets, uint256 badDebtAssets, uint256 badDebtShares)\n</code></pre></p> <ul> <li>This event is emitted when a liquidation occurs in the market.<ul> <li><code>id:</code> the unique market identifier (bytes32), representing the market where the liquidation takes place.</li> <li><code>caller:</code> the address that submitted the transaction (the liquidator).</li> <li><code>borrower:</code> the address of the borrower being liquidated.</li> <li><code>repaidAssets:</code> the amount of borrowed assets repaid during the liquidation.</li> <li><code>repaidShares:</code> the number of borrowed shares repaid.</li> <li><code>seizedAssets:</code> the amount of collateral assets seized by the liquidator.</li> <li><code>badDebtAssets:</code> the amount of assets classified as bad debt after liquidation.</li> <li><code>badDebtShares:</code> the number of borrowed shares corresponding to the bad debt.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#8-set-authorization","title":"8. Set Authorization","text":"<p>Sets or updates the authorization status for a specific address. <pre><code>function setAuthorization(address authorized, bool newIsAuthorized)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>authorized:</code> the address to grant or revoke authorization.</li> <li><code>newIsAuthorized:</code> a boolean indicating the authorization status, true to authorize, false to revoke.</li> </ul> </li> <li> <p>Returns: None, reverts on error.</p> </li> </ul> <p>Event <pre><code>SetAuthorization(address indexed caller, address indexed authorizer, address indexed authorized, bool newIsAuthorized)\n</code></pre></p> <ul> <li>This event is emitted when authorization status for an address is updated.<ul> <li><code>caller:</code> the address that initiated the transaction.</li> <li><code>authorizer:</code> the address granting the authorization.</li> <li><code>authorized:</code> the address receiving the authorization.</li> <li><code>newIsAuthorized:</code> the new authorization status, true for granted, false for revoked.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#9-set-authorization-with-signature","title":"9. Set Authorization With Signature","text":"<p>Sets authorization for an address using an off-chain signature, while recording a nonce to prevent replay attacks. <pre><code>function setAuthorizationWithSig(Authorization memory authorization, Signature calldata signature)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>authorization:</code> the authorization data structure containing the authorization details.</li> <li><code>signature:</code> the ECDSA signature proving that the authorization was signed by the authorizer.</li> </ul> </li> <li> <p>Returns: None, reverts on error.</p> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#10-accrue-interest","title":"10. Accrue Interest","text":"<p>The accrueInterest function updates the interest accrued in the SBM V2 market based on the latest block timestamp. It synchronizes the market\u2019s supply and borrow states to reflect the most recent interest calculations. <pre><code>function accrueInterest(MarketParams memory marketParams)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>marketParams:</code> the configuration parameters of the target market (includes loan token, collateral token, oracle, interest rate model, and LTV ratio).</li> </ul> </li> <li> <p>Returns: None, reverts on error.</p> </li> </ul> <p>Event <pre><code>AccrueInterest(Id indexed id, uint256 prevBorrowRate, uint256 interest, uint256 feeShares)\n</code></pre></p> <ul> <li>This event is emitted during the execution of functions such as borrow, repay, and supply, which update the market\u2019s borrowing state.<ul> <li><code>id:</code> the unique market identifier (bytes32), representing the market where the interest is accrued.</li> <li><code>prevBorrowRate:</code> the previous borrowing rate before the update.</li> <li><code>interest:</code> the number of interest accrued in this update.</li> <li><code>feeShares:</code> the portion of accrued interest distributed to the fee recipient, represented in shares.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#11-is-healthy","title":"11. Is Healthy","text":"<p>Checks whether a borrower\u2019s account in a specific market is healthy.  <pre><code>function isHealthy(MarketParams memory marketParams, Id id, address borrower) external view returns (bool)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>marketParams:</code> the configuration parameters of the target market (includes loan token, collateral token, oracle, interest rate model, and LTV ratio).</li> <li><code>id:</code> the market\u2019s unique identifier.</li> <li><code>borrower:</code> the address of the borrower whose account health is being checked.</li> </ul> </li> <li> <p>Returns: </p> <ul> <li>true means the position is sufficiently collateralized under the current price and LLTV.</li> <li>false means the position is undercollateralized and eligible for liquidation, but it does not necessarily mean there is \u201cbad debt\u201d remaining after liquidation.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#12-get-price","title":"12. Get Price","text":"<p>Retrieves the relative price between the collateral token and the loan token in a specific market. <pre><code>function getPrice(MarketParams memory marketParams) public view returns (uint256)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>marketParams:</code> the configuration parameters of the target market (includes loan token, collateral token, oracle, interest rate model, and LTV ratio).</li> </ul> </li> <li> <p>Returns: the value of one collateral token expressed in loan token units.</p> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#13-get-whitelist","title":"13. Get WhiteList","text":"<p>Retrieves the whitelist of a specified market. <pre><code>function getWhiteList(Id id) external view returns (address[])\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>id:</code> the market\u2019s unique identifier.</li> </ul> </li> <li> <p>Returns: the list of addresses included in the whitelist for the specified market.</p> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#14-is-whitelist","title":"14. Is WhiteList","text":"<p>Checks whether a specific account is included in the whitelist of the market identified by id. <pre><code>function isWhiteList(Id id, address account) public view returns (bool)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>id:</code> the market\u2019s unique identifier.</li> <li><code>account:</code> the address to check for whitelist eligibility.</li> </ul> </li> <li> <p>Returns: true if the whitelist is not set or if the account is included in it; otherwise, false.</p> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#15-get-liquidation-whitelist","title":"15. Get Liquidation Whitelist","text":"<p>Retrieves the list of addresses in the liquidation whitelist for the specified market identified by id. <pre><code>function getLiquidationWhitelist(Id id) external view returns (address[])\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>id:</code> the unique identifier of the market.</li> </ul> </li> <li> <p>Returns: a list of addresses authorized to perform liquidation operations in the specified market.</p> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#16-is-liquidation-whitelist","title":"16. Is Liquidation Whitelist","text":"<p>Checks whether a given account is included in the liquidation whitelist for the specified market. <pre><code>function isLiquidationWhitelist(Id id, address account) external view returns (bool)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>id:</code> the unique identifier of the market.</li> <li><code>account:</code> the address to be checked in the liquidation whitelist.</li> </ul> </li> <li> <p>Returns: returns true if the account is in the whitelist; otherwise, returns false.</p> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#17-minimum-loan","title":"17. Minimum Loan","text":"<p>Retrieves the minimum loan amount allowed in the specified market. <pre><code>function minLoan(MarketParams memory marketParams) public view returns (uint256)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>marketParams:</code> the configuration parameters of the target market (includes loan token, collateral token, oracle, interest rate model, and LTV ratio).</li> </ul> </li> <li> <p>Returns: the minimum amount of loan assets that can be borrowed from the market.</p> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#18-get-id","title":"18. Get Id","text":"<p>Returns the unique identifier (ID) corresponding to the specified market. <pre><code>function getId(MarketParams memory marketParams) external pure returns (bytes32 id)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>marketParams:</code> the configuration parameters of the target market (includes loan token, collateral token, oracle, interest rate model, and LTV ratio).</li> </ul> </li> <li> <p>Returns:</p> <ul> <li><code>id:</code> the unique market ID, calculated as keccak256(marketParams).</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#19-paused","title":"19. Paused","text":"<p>Checks whether the market is globally paused. <pre><code>function paused() public view virtual returns (bool)\n</code></pre></p> <ul> <li> <p>Parameter description: N/A.</p> </li> <li> <p>Returns: true if the protocol is globally paused and all markets are disabled; false otherwise.</p> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#20-borrow-rate-full-view","title":"20. Borrow Rate Full View","text":"<p>Retrieves both the average borrow rate of a given market since the last update and the current borrow rate at the target utilization level. <pre><code>function borrowRateFullView(Id id) public view returns (uint256 avgBorrowRate, int256 targetBorrowRate)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>id:</code> the unique market ID.</li> </ul> </li> <li> <p>Returns:</p> <ul> <li><code>avgBorrowRate:</code> the average borrow rate since the last interest update.</li> <li><code>targetBorrowRate:</code> the current borrow rate at the target utilization level.</li> </ul> </li> </ul> <p> </p>"},{"location":"developers/supply_and_borrow_market/sbmV2/#moolah-valut","title":"Moolah Valut","text":"<p>A Vault is a single-asset management contract that provides borrowable assets to the market and can be created by anyone. Each vault operates as an independent contract managed by a designated fund manager, who can configure which markets to supply liquidity to. When users deposit assets into the vault, the funds are automatically allocated to the configured markets. The fund manager also has the ability to reallocate funds across markets. The vault follows the ERC-4626 standard (an extension of ERC-20 for tokenized vaults), allowing users to mint transferable shares upon depositing assets.</p>"},{"location":"developers/supply_and_borrow_market/sbmV2/#1-create-moolah-vault","title":"1. Create Moolah Vault","text":"<p>Creates a new MoolahVault and returns the addresses of the created vault and related contracts. The MoolahVault itself acts as a token. Users receive transferable vault shares when depositing assets. <pre><code>function createMoolahVault(address manager, address curator, address guardian, uint256 timeLockDelay, address asset, string memory name, string memory symbol) external returns (address vault, address managerTimeLock, address curatorTimeLock)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>manager:</code> the address with manager privileges in the MoolahVault\u2019s TimeLock contract.</li> <li><code>curator:</code> the address with curator privileges in the TimeLock contract.</li> <li><code>guardian:</code> the address responsible for emergency control or protection actions.</li> <li><code>timeLockDelay:</code> the delay period for executing TimeLock transactions.</li> <li><code>asset:</code> the address of the asset managed by MoolahVault.</li> <li><code>name:</code> the name of the MoolahVault token.</li> <li><code>symbol:</code> the symbol of the MoolahVault token.</li> </ul> </li> <li> <p>Returns:</p> <ul> <li><code>vault:</code> the address of the newly created MoolahVault contract.</li> <li><code>managerTimeLock:</code> the address of the Manager Timelock contract for the vault.</li> <li><code>curatorTimeLock:</code> the address of the Curator Timelock contract for the vault.</li> </ul> </li> </ul> <p>Event <pre><code>CreateMoolahVault(address indexed moolahVault, address implementation, address managerTimeLock, address curatorTimeLock, uint256 timeLockDelay, address indexed caller, address manager, address curator, address guardian, address indexed asset, string name, string symbol)\n</code></pre></p> <ul> <li>This event is emitted when a new MoolahVault is created.<ul> <li><code>moolahVault:</code> the address of the newly created MoolahVault.</li> <li><code>implementation:</code> the implementation contract address used by the vault.</li> <li><code>managerTimeLock:</code> the TimeLock contract address for the manager.</li> <li><code>curatorTimeLock:</code> the TimeLock contract address for the curator.</li> <li><code>timeLockDelay:</code> the delay period (in seconds) for executing TimeLock transactions.</li> <li><code>caller:</code> the address that initiated the creation transaction.</li> <li><code>manager:</code> the address assigned as the manager in the TimeLock contract.</li> <li><code>curator:</code> the address assigned as the curator in the TimeLock contract.</li> <li><code>guardian:</code> the guardian address responsible for vault protection or emergency actions.</li> <li><code>asset:</code> the address of the underlying asset managed by the vault.</li> <li><code>name:</code> the name of the MoolahVault token.</li> <li><code>symbol:</code> the symbol of the MoolahVault token.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#2-set-vault-admin","title":"2. Set Vault Admin","text":"<p>Sets the address of the Vault Administrator. <pre><code>function setVaultAdmin(address _vaultAdmin)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>_vaultAdmin:</code> the address to be assigned as the Vault Administrator.</li> </ul> </li> <li> <p>Returns: None, reverts on error.</p> </li> </ul> <p>Event <pre><code>SetVaultAdmin(address vaultAdmin)\n</code></pre></p> <ul> <li>This event is emitted when the Vault Administrator address is set.<ul> <li><code>vaultAdmin:</code> the address assigned as the new Vault Administrator.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#3-deposit","title":"3. Deposit","text":"<p>Deposits assets into the vault. <pre><code>function deposit(uint256 assets, address receiver) public returns (uint256 shares)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>assets:</code> the amount of assets to deposit into the vault.</li> <li><code>receiver:</code> the address that will receive the minted vault shares.</li> </ul> </li> <li> <p>Returns:</p> <ul> <li><code>shares:</code> the number of vault shares minted to the receiver in exchange for the deposited assets.</li> </ul> </li> </ul> <p>Event <pre><code>Deposit(address indexed sender, address indexed owner, uint256 assets, uint256 shares)\n</code></pre></p> <ul> <li>This event is emitted when a user deposits assets into the vault.<ul> <li><code>sender:</code> the address that initiated the deposit transaction.</li> <li><code>owner:</code> the address that owns the deposited assets.</li> <li><code>assets:</code> the amount of assets deposited by the user.</li> <li><code>shares:</code> the number of vault shares minted to the user corresponding to the deposited assets.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#4-mint","title":"4. Mint","text":"<p>Mints vault shares by depositing the corresponding amount of assets. <pre><code>function mint(uint256 shares, address receiver) public override returns (uint256 assets)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>shares:</code> the number of vault shares to mint.</li> <li><code>receiver:</code> the address that will receive the minted shares.</li> </ul> </li> <li> <p>Returns:</p> <ul> <li><code>assets:</code> the amount of assets required to mint the specified number of shares.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#5-withdraw","title":"5. Withdraw","text":"<p>Withdraws assets from the vault by burning the corresponding number of shares. <pre><code>function withdraw(uint256 assets, address receiver, address owner) public override returns (uint256 shares)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>assets:</code> the amount of assets to withdraw from the vault.</li> <li><code>receiver:</code> the address that will receive the withdrawn assets.</li> <li><code>owner:</code> the address that owns the withdrawn assets.</li> </ul> </li> <li> <p>Returns:</p> <ul> <li><code>shares:</code> the  number of shares burned corresponding to the withdrawn assets.</li> </ul> </li> </ul> <p>Event <pre><code>Withdraw(address indexed sender, address indexed receiver, address indexed owner, uint256 assets, uint256 shares)\n</code></pre></p> <ul> <li>This event is emitted when a user withdraws assets from the vault.<ul> <li><code>sender:</code> the address that initiated the withdrawal transaction.</li> <li><code>receiver:</code> the address that receives the withdrawn assets.</li> <li><code>owner:</code> the address that owns the withdrawn assets.</li> <li><code>assets:</code> the amount of assets withdrawn from the vault.</li> <li><code>shares:</code> the number of vault shares burned to redeem the withdrawn assets.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#6-is-whitelist","title":"6. Is WhiteList","text":"<p>Checks whether a specific account is included in the whitelist. <pre><code>function isWhiteList(address account) public view returns (bool)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>account:</code> the address to check.</li> </ul> </li> <li> <p>Returns: returns true if the account is on the whitelist; otherwise, returns false.</p> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#7-get-whitelist","title":"7. Get WhiteList","text":"<p>Retrieves the list of addresses currently included in the whitelist. <pre><code>function getWhiteList() external view returns (address[])\n</code></pre></p> <ul> <li> <p>Parameter description: N/A.</p> </li> <li> <p>Returns: an array containing all addresses that are on the whitelist.</p> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#8-supply-queue-length","title":"8. Supply Queue Length","text":"<p>Returns the total number of markets currently in the supply queue. <pre><code>function supplyQueueLength() external view returns (uint256)\n</code></pre></p> <ul> <li> <p>Parameter description: N/A.</p> </li> <li> <p>Returns: the length of the supply queue.</p> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#9-withdraw-queue-length","title":"9. Withdraw Queue Length","text":"<p>Returns the total number of markets currently in the withdrawal queue. <pre><code>function withdrawQueueLength() external view returns (uint256)\n</code></pre></p> <ul> <li> <p>Parameter description: N/A.</p> </li> <li> <p>Returns: the length of the withdrawal queue.</p> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#10-maximum-deposit","title":"10. Maximum Deposit","text":"<p>Returns the maximum amount of assets that can be deposited into the vault. <pre><code>function maxDeposit(address) public view override returns (uint256)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>address:</code> the address of the depositor. </li> </ul> </li> <li> <p>Returns: the maximum amount of assets that can be deposited.</p> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#11-maximum-mint","title":"11. Maximum Mint","text":"<p>Returns the maximum number of shares that can be minted, corresponding to maxDeposit, with the asset amount converted into shares. <pre><code>function maxMint(address) public view override returns (uint256)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>address:</code> the address of the minter.</li> </ul> </li> <li> <p>Returns: the maximum number of shares that can be minted.</p> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#12-maximum-withdraw","title":"12. Maximum Withdraw","text":"<p>Returns the maximum amount of assets that a user can withdraw from the vault. <pre><code>function maxWithdraw(address owner) public view override returns (uint256 assets)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>owner:</code> the address of the user whose withdrawable balance is being queried.</li> </ul> </li> <li> <p>Returns: </p> <ul> <li><code>assets:</code> the maximum amount of assets that can be withdrawn by the specified user.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#13-maximum-redeem","title":"13. Maximum Redeem","text":"<p>Returns the maximum number of shares that a user can redeem from the vault. <pre><code>function maxRedeem(address owner) public view override returns (uint256)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>owner:</code>  the address of the user whose redeemable shares are being queried.</li> </ul> </li> <li> <p>Returns: the maximum number of shares that can be redeemed by the specified user.</p> </li> </ul> <p> </p>"},{"location":"developers/supply_and_borrow_market/sbmV2/#trx-provider","title":"TRX Provider","text":"<p>Since both the Moolah Market and MoolahVault operate with TRC20 tokens, WTRX is used as a wrapped version of TRX. Users can interact directly with TRX through the TRXProvider, which internally handles the conversion between TRX and WTRX before executing the corresponding operations in the market or vault.</p>"},{"location":"developers/supply_and_borrow_market/sbmV2/#1-deposit","title":"1. Deposit","text":"<p>When users stake TRX, the TRXProvider automatically converts TRX into WTRX and deposits it into the corresponding Vault. <pre><code>// Deposit without specifying a vault\nfunction deposit(address receiver) external payable returns (uint256 shares)\n\n// Deposit with a specified vault\nfunction deposit(address vault, address receiver) public payable returns (uint256 shares)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>valut:</code> the address of the specific Vault where the converted WTRX will be deposited. If not specified, the system automatically deposits into the default Vault configured by the TRXProvider.</li> <li><code>receiver:</code> the address that will receive the minted vault shares corresponding to the deposited assets.</li> </ul> </li> <li> <p>Returns:</p> <ul> <li><code>shares:</code> the number of vault shares minted for the receiver based on the amount of TRX (converted to WTRX) deposited into the specified vault.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#2-mint","title":"2. Mint","text":"<p>This function stakes TRX similar to the deposit function, but instead of specifying the asset amount, users specify the number of shares they wish to mint. The TRXProvider converts the provided TRX into WTRX and deposits it into the vault. <pre><code>// Mint without specifying a vault\nfunction mint(uint256 shares, address receiver) external payable returns (uint256 assets)\n\n// Mint with a specified vault\nfunction mint(address vault, uint256 shares, address receiver) public payable returns (uint256 assets)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>valut:</code> the address of the specific Vault where the converted WTRX will be deposited. If not specified, the system automatically deposits into the default Vault configured by the TRXProvider.</li> <li><code>shares:</code> the number of vault shares to mint.</li> <li><code>receiver:</code> the address that will receive the minted vault shares corresponding to the deposited assets.</li> </ul> </li> <li> <p>Returns:</p> <ul> <li><code>assets:</code> the amount of TRX (converted to WTRX) required to mint the specified number of shares.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#3-withdraw","title":"3. Withdraw","text":"<p>Withdraws TRX. The TRXProvider retrieves the corresponding amount of WTRX from the vault, converts it back to TRX, and transfers it to the user. <pre><code>// Withdraw without specifying a vault\nfunction withdraw(uint256 assets, address payable receiver, address owner) external returns (uint256 shares)\n\n// Withdraw with a specified vault\nfunction withdraw(address vault, uint256 assets, address payable receiver, address owner) external returns (uint256 shares)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>valut:</code> the address of the specific Vault where the converted WTRX will be deposited. If not specified, the system automatically deposits into the default Vault configured by the TRXProvider.</li> <li><code>assets:</code> the amount of TRX to withdraw (converted from WTRX).</li> <li><code>receiver:</code> the address that will receive the withdrawn TRX.</li> <li><code>owner:</code> the address that owns the withdrawn assets (payer of the shares).</li> </ul> </li> <li> <p>Returns:</p> <ul> <li><code>shares:</code> the number of shares burned in exchange for the specified amount of TRX.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#4-redeem","title":"4. Redeem","text":"<p>Withdraws TRX. Similar to withdrawal, but instead of specifying the withdrawal amount, the user specifies the number of shares to redeem. The TRXProvider retrieves the corresponding amount of WTRX from the vault, converts it back to TRX, and transfers it to the user. <pre><code>// Redeem without specifying a vault\nfunction redeem(uint256 shares, address payable receiver, address owner) external returns (uint256 assets)\n\n// Redeem with a specified vault\nfunction redeem(address vault, uint256 shares, address payable receiver, address owner) external returns (uint256 assets)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>valut:</code> the address of the vault from which WTRX will be redeemed. If not specified, the default vault is used.</li> <li><code>shares:</code> the number of shares to redeem.</li> <li><code>receiver:</code> the address that will receive the redeemed TRX.</li> <li><code>owner:</code> the address that owns the redeemed shares.</li> </ul> </li> <li> <p>Returns:</p> <ul> <li><code>assets:</code> the amount of TRX received from redeeming the specified shares.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#5-borrow","title":"5. Borrow","text":"<p>Borrows TRX from the specified market. The TRXProvider interacts with the underlying vault and market contracts to withdraw the corresponding WTRX, converts it to TRX, and sends it to the user. <pre><code>function borrow(MarketParams calldata marketParams, uint256 assets, uint256 shares, address onBehalf, address payable receiver) external returns (uint256 _assets, uint256 _shares)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>marketParams:</code> the parameters identifying the market (including borrowable asset, collateral asset, oracle, interest rate model, and liquidation factor).</li> <li><code>assets:</code> the amount of TRX to borrow.</li> <li><code>shares:</code> the corresponding share amount representing the borrowed position.</li> <li><code>onBehalf:</code> the address on whose behalf the borrowing is executed.</li> <li><code>receiver:</code> the address that will receive the borrowed TRX.</li> </ul> </li> <li> <p>Returns:</p> <ul> <li><code>_assets:</code> the actual amount of TRX borrowed.</li> <li><code>_shares:</code> the number of shares corresponding to the borrowed assets.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#6-repay","title":"6. Repay","text":"<p>Repays borrowed TRX. When a user repays, the TRXProvider converts the sent TRX into WTRX internally and uses it to repay the corresponding market debt. <pre><code>function repay(MarketParams calldata marketParams, uint256 assets, uint256 shares, address onBehalf, bytes calldata data) external payable returns (uint256 _assets, uint256 _shares)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>marketParams:</code> the parameters identifying the market (including borrowable asset, collateral asset, oracle, interest rate model, and liquidation factor).</li> <li><code>assets:</code> the amount of TRX to repay.</li> <li><code>shares:</code> the share amount corresponding to the repaid assets.</li> <li><code>onBehalf:</code> the address on whose behalf the repayment is made.</li> <li><code>data:</code> additional data that can be used for callback or custom logic.</li> </ul> </li> <li> <p>Returns:</p> <ul> <li><code>_assets:</code> the actual amount of TRX repaid.</li> <li><code>_shares:</code> the number of shares corresponding to the repaid amount.</li> </ul> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#7-supply-collateral","title":"7. Supply Collateral","text":"<p>Supplies TRX as collateral. When a user provides collateral in TRX, the TRXProvider automatically wraps TRX into WTRX and deposits it into the corresponding market as collateral. <pre><code>function supplyCollateral(MarketParams calldata marketParams, address onBehalf, bytes calldata data) external payable\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>marketParams:</code> the parameters identifying the market (including borrowable asset, collateral asset, oracle, interest rate model, and liquidation factor).</li> <li><code>onBehalf:</code> the address on whose behalf the collateral is supplied.</li> <li><code>data:</code> additional data that can be used for callback or custom logic.</li> </ul> </li> <li> <p>Returns: None, reverts on error.</p> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#8-withdraw-collateral","title":"8. Withdraw Collateral","text":"<p>Withdraws TRX collateral. When a user withdraws collateral, the TRXProvider retrieves WTRX from the market, unwraps it into TRX, and transfers it to the specified receiver. <pre><code>function withdrawCollateral(MarketParams calldata marketParams, uint256 assets, address onBehalf, address payable receiver)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>marketParams:</code> the parameters identifying the market (including borrowable asset, collateral asset, oracle, interest rate model, and liquidation factor).</li> <li><code>assets:</code> the amount of collateral (in TRX) to withdraw.</li> <li><code>onBehalf:</code> the address from which the collateral is withdrawn.</li> <li><code>receiver:</code> the address that receives the withdrawn TRX.</li> </ul> </li> <li> <p>Returns: None, reverts on error.</p> </li> </ul> <p> </p>"},{"location":"developers/supply_and_borrow_market/sbmV2/#resilient-oracle","title":"Resilient Oracle","text":"<p>The Resilient Oracle is an aggregated price feed contract that supports configuring up to three price sources (in Chainlink API format) for each token. It allows querying the price of any token, with a precision of 18 decimals.</p>"},{"location":"developers/supply_and_borrow_market/sbmV2/#1-peek","title":"1. Peek","text":"<p>Retrieves the price of a specified token. <pre><code>function peek(address asset) external view override returns (uint256)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>asset:</code> the token address to query.</li> </ul> </li> <li> <p>Returns: the current price of the token (with 18-decimal precision).</p> </li> </ul> <p> </p>"},{"location":"developers/supply_and_borrow_market/sbmV2/#interest-rate-model","title":"Interest Rate Model","text":"<p>JustLend DAO SBM V2 adopts the AdaptiveCurve Interest Rate Model, an enhanced version of the Jump Curve model from JustLend DAO SBM V1. This upgraded model introduces dynamic adjustments, enabling interest rates to automatically adapt in real time to maintain market utilization around the optimal target level.</p>"},{"location":"developers/supply_and_borrow_market/sbmV2/#1-default-targetutilization","title":"1. Default TargetUtilization","text":"<p>This value defines the optimal utilization level that the interest rate model aims to maintain. Under normal circumstances, it remains constant and only changes when the underlying interest rate model implementation is replaced. <pre><code>function defaultTargetUtilization() external view returns (int256)\n</code></pre></p> <ul> <li> <p>Parameter description: N/A.</p> </li> <li> <p>Returns: the default target utilization rate of the market.</p> </li> </ul>"},{"location":"developers/supply_and_borrow_market/sbmV2/#2-target-utilization","title":"2. Target Utilization","text":"<p>If the market has a non-zero target utilization rate configured, that value is returned. Otherwise, the function returns the default target utilization rate. <pre><code>function targetUtilization(Id id) public view returns (int256)\n</code></pre></p> <ul> <li> <p>Parameter description:</p> <ul> <li><code>id:</code> the unique identifier of the market.   </li> </ul> </li> <li> <p>Returns: the target utilization rate for a specific market.</p> </li> </ul>"},{"location":"getting_started/overview/","title":"Overview","text":"<p>JustLend DAO is a cutting-edge money market protocol powered by TRON, designed to create fund pools with interest rates determined by an algorithm based on the supply and demand of TRON assets. The protocol involves two main roles: suppliers and borrowers, who engage directly with the platform to earn or pay floating interest rates.</p> <p>Each money market on JustLend DAO represents a specific TRON asset, including TRX, TRC20 stablecoins like USDT, and other TRC20-based tokens. The platform features an open and transparent ledger that records all transactions and historical interest rates, ensuring transparency and trust among users. </p>"},{"location":"getting_started/overview/#core-architecture-of-justlend-dao","title":"Core Architecture of JustLend DAO","text":"<ul> <li> <p>Suppliers: supply assets to the money markets of JustLend DAO smart contracts, and the assets supplied are the underlying assets.</p> <ul> <li>Smart contracts distribute jToken that corresponds to underlying assets to users' accounts at the exchange rate.</li> <li>Supplied assets to JustLend DAO money markets can enjoy interest earnings on their loans.Redeem: Suppliers can redeem the underlying assets they have supplied at any time.</li> </ul> </li> <li> <p>Redeem: suppliers can redeem the underlying assets they have supplied at any time.</p> </li> <li> <p>Borrowers: over-collateralize an asset can borrow from the corresponding market on JustLend DAO.</p> <ul> <li>Unlike P2P lending, borrowers do not have to negotiate with suppliers: orders will be automatically matched by JustLend DAO smart contracts as long as the token market has sufficient liquidity.</li> <li>Borrowing interest rates are determined by JustLend DAO smart contracts in real-time based on market supply and demand. Within a block, borrowers of the same token share the same borrowing interest rate.</li> </ul> </li> <li> <p>Repay: borrowers can repay their loans at any time.</p> </li> <li> <p>Liquidation: if the value of a borrower's collateralized assets falls below the liquidation threshold, JustLend DAO smart contracts will trigger liquidation automatically.</p> </li> </ul>"},{"location":"getting_started/concepts/SBMV2/","title":"SBM V2","text":"<p>JustLend DAO SBM V2 is a fully upgraded decentralized lending protocol built on the TRON network. The SBM V2 adopts an isolated-collateral lending protocol with a dual-layer structure of Vaults and Markets, and introduces the AdaptiveCurve Interest Rate Model. This new design aims to provide higher capital efficiency for depositors and borrowers while ensuring a robust risk isolation framework.</p>"},{"location":"getting_started/concepts/SBMV2/#protocol-architecture","title":"Protocol Architecture","text":""},{"location":"getting_started/concepts/SBMV2/#vaults","title":"Vaults","text":"<ul> <li>A Vault serves as the liquidity aggregation and distribution hub. Depositors can supply a single type of asset (such as USDT or USDD) into its corresponding Vault;</li> <li>The Vault allocates these deposits across multiple Markets, each backed by a specific collateral asset;</li> <li>In return, depositors earn yield from all underlying markets, with interest weighted and distributed automatically according to each market\u2019s performance.</li> </ul>"},{"location":"getting_started/concepts/SBMV2/#markets","title":"Markets","text":"<ul> <li>Each Market represents an independent lending environment. A Market supports only one type of collateral and is linked to a specific Vault (e.g., USDT Vault).</li> <li>Borrowers use the supported collateral to borrow assets from the linked Vault;</li> <li>Every Market is isolated, the risk associated with one collateral type will not affect others, effectively preventing cross-asset contagion.</li> </ul>"},{"location":"getting_started/concepts/SBMV2/#roles-and-mechanisms","title":"Roles and Mechanisms","text":"<ul> <li> <p>Depositors (Suppliers)</p> <ul> <li>Supply a single depositable asset (e.g., USDT) into the corresponding Vault;</li> <li>The Vault aggregates liquidity from all suppliers of the same asset;</li> <li>Depositors indirectly lend assets to multiple Markets and receive interest weighted by each Market\u2019s performance.</li> </ul> </li> <li> <p>Borrowers</p> <ul> <li>Pledge supported collateral assets to borrow funds from the Market;</li> <li>Borrowing activities are confined within individual Markets;</li> <li>Interest paid by borrowers flows back into the Vault and is distributed proportionally among depositors.</li> </ul> </li> </ul>"},{"location":"getting_started/concepts/SBMV2/#interest-rate-model","title":"Interest Rate Model","text":"<p>JustLend DAO SBM V2 introduces the AdaptiveCurve Interest Rate Model. It builds upon the Jump Curve model used in SBM V1, but adds dynamic adaptability, allowing real-time rate adjustments to keep market utilization near an optimal level (e.g., 90%). This design ensures both rate stability and maximum capital efficiency.</p> <p>Just Like SBM V1, SBM V2 uses a jump-style rate curve, where the borrow rate rises sharply once utilization exceeds the kink point. However, V2 introduces a dynamic vertical shift:</p> <ul> <li>When utilization is low \u2192 the entire curve shifts downward, lowering borrow rates to stimulate borrowing;</li> <li>When utilization is high \u2192 the curve shifts upward, raising rates to encourage repayments.</li> </ul>"},{"location":"getting_started/concepts/SBMV2/#key-concepts","title":"Key Concepts","text":"<p>Target Utilization</p> <p>The Target Utilization represents the equilibrium point of the Interest Rate Model\u2019s Jump Curve, typically set at 90%. It reflects the optimal balance between borrowed assets and available liquidity, calculated as:</p> <pre><code>Utilization = BorrowedAssets / (BorrowedAssets + AvailableLiquidity)\n</code></pre> <p>When the utilization level reaches the target, the market is considered stable, meaning borrowing and liquidity levels are appropriately balanced.</p> <p>Rate at Target</p> <p>The Rate at Target defines the borrowing interest rate when utilization equals the target (e.g., 90%). It is initially configured by the protocol (for example, at 4% annualized) and is dynamically adjusted over time based on market conditions. Each market maintains its own rateAtTarget parameter, allowing for fine-grained control and independent optimization across different markets.</p> <p>Adaptive Mechanism</p> <p>To maintain stability, the Interest Rate Model includes an Adaptive Mechanism. When the actual utilization deviates significantly from the target for a prolonged period, the system automatically adjusts the entire interest rate curve at a controlled rate. * If utilization &lt; target \u2192 rateAtTarget decreases to encourage borrowing. * If utilization &gt; target \u2192 rateAtTarget increases to promote repayments.</p> <p>This adaptive mechanism, driven by target utilization and time, enables the protocol to continuously self-regulate utilization levels, ensuring market efficiency and sustainability without the need for governance intervention.</p>"},{"location":"getting_started/concepts/SBMV2/#liquidations","title":"Liquidations","text":"<p>The core liquidation logic of the SBM V2 protocol remains consistent with the mechanism used in SBM V1. A borrower becomes eligible for liquidation when the value of their debt exceeds the value of their collateral adjusted by the Collateral Factor (CF). This condition is evaluated using the Liquidation Loan-to-Value (LLTV) threshold, which varies by market based on the underlying collateral asset.</p> <p>Under V2, liquidation is triggered when LTV equals the market\u2019s defined LLTV (e.g., 80%).</p> <pre><code>LTV = (Borrow Amount * Borrow Price) / (Collateral Amount * Collateral Price) \u200b\n</code></pre> <p>This is equivalent to the SBM V1 risk metric:</p> <pre><code>Risk Level = Total Borrow / Borrow Limit * 100 = Total Borrow / \u2211 (Asset supplied * Collateral Factor)\n</code></pre> <p>A position becomes liquidatable once the Risk Level equals to 100%.</p> <p>However, unlike V1, SBM V2 introduces a significant improvement through its isolated-lending model, where each market operates independently with its own risk parameters (e.g., LLTV.). This architecture ensures that risk events are contained within individual markets, preventing unwanted spillover effects and reducing systemic liquidation risk across the protocol. As a result, users benefit from enhanced safety, more predictable outcomes, and a more robust overall risk framework.</p>"},{"location":"getting_started/concepts/SBMV2/#comparison-justlend-sbm-v1-vs-v2","title":"Comparison: JustLend SBM V1 vs V2","text":"<p>To provide a clearer understanding of the improvements and optimizations introduced in JustLend DAO SBM V2, the following table presents a detailed comparison with V1. This comparison highlights the key differences in design, functionality, and performance, allowing users to quickly grasp the core enhancements made in the latest version.</p> Aspect SBM V1 SBM V2 Structure Cross-Collateral Market: Multiple assets can be used as collateral and borrowed against each other. Isolated Markets: 1-to-1 asset mapping; each market only supports one collateral and one borrowable asset. Lending Flexibility Users can use any asset in their portfolio as collateral and borrow any supported asset. A unified large market allows cross-collateral lending. Single market: Only one collateral type can be used to borrow a specific asset. Multiple markets are used to enable lending of different assets. Risk Isolation Risks are shared across assets, with collateral automatically used as borrowed assets. Each market is independent, with complete risk isolation. Liquidity Characteristics Shared liquidity across assets and larger liquidity pools; collateral can also be borrowed. Independent liquidity for each asset pair, which may lead to fragmented liquidity; collateral cannot be borrowed. User Investment Method Users deposit assets directly into JustLend\u2019s market. Users deposit assets into a Vault, and the Vault Manager is responsible for maximizing investment returns. User Investment Yield Users can only invest their assets into one market at a time. Vault Managers adjust investments every hour, optimizing returns across multiple markets. Borrower\u2019s Collateral Borrower\u2019s collateral and user investments are mixed, and collateral can be borrowed as well. User investments and borrower\u2019s collateral are separated, and collateral cannot be borrowed again. Collateral Interest Collateral shares deposit interest, which dilutes deposit APY. Borrower\u2019s collateral does not earn interest, ensuring investor returns are not diluted. <p>According to the above comparison, we can see the JustLend DAO SBM V1 is ideal for users and institutions seeking simplified lending operations and shared liquidity. Its cross-collateralized market allows multiple assets to interact freely, enabling users to supply and borrow across a unified liquidity pool. This design offers high capital efficiency and ease of use, making it suitable for users with diversified portfolios who prefer flexibility and simplicity over strict risk isolation.</p> <p>In contrast, JustLend DAO SBM V2 introduces a more advanced and modular structure featuring Vaults and Isolated Markets, designed for users who prioritize risk control, optimized yields, and strategic asset management. Each market operates independently, ensuring that the risks of one collateral asset do not affect others. Through Vault Managers, deposits are dynamically allocated to maximize returns across multiple markets. This makes SBM V2 particularly suitable for professional users, DeFi strategists, and institutions seeking higher yield efficiency, customizable risk exposure, and fine-grained control over investment strategies.</p>"},{"location":"getting_started/concepts/borrow/","title":"Borrow","text":"<p>The JustLend DAO offers user an efficient way to access liquidity by using their supplied assets as collateral. This approach unlocks capital without requiring users to sell their holdings, making it a powerful tool for managing financial needs. However, borrowers must remain vigilant about potential risks, especially in liquidation.</p>"},{"location":"getting_started/concepts/borrow/#how-it-works","title":"How It Works","text":"<p>Borrowing on JustLend DAO is simple and dynamic. Users can leverage their deposited assets to borrow tokens, with interest rates determined by the protocol\u2019s utilization rate\u2014the percentage of supplied liquidity currently borrowed. As borrowing demand increases, utilization rates rise, leading to higher interest rates. This dynamic adjustment ensures a balanced ecosystem that benefits both borrowers and suppliers.</p> <p>Dynamic Interest Rates: Interest rates are influenced by protocol mechanics and community governance, adapting to changes in borrowing activity. This system allows the platform to respond effectively to market conditions.</p> <p>Reserve Parameters: Each reserve in the JustLend DAO Protocol is designed with specific parameters to attract both borrowers and suppliers, ensuring a steady flow of liquidity.</p> <p>Liquidation Risk: Borrowers face liquidation if their risk value over the required threshold. To mitigate this, it\u2019s essential to monitor collateralisation levels and maintain a healthy health factor.</p>"},{"location":"getting_started/concepts/borrow/#how-do-i-borrow-assets","title":"How Do I Borrow Assets","text":"<p>Borrowing can be done with a user interface SBM V1 or SBM V2. Before we walk through the steps of a borrowing sequence, let\u2019s cover some key parameters:</p> <p>SBM:</p> <ul> <li><code>Borrow APY:</code> the cost of borrowing assets in the JustLend DAO Protocol, which can vary based on the overall utilization of the liquidity pool;</li> <li><code>Total Borrow:</code> the total borrow amount in the market. As the total borrow changes, the borrow APY will also change accordingly;</li> <li><code>Borrowers:</code> the amount of users participating in the borrow market;</li> <li><code>Collateral Factor:</code> the percentage of a supplied asset\u2019s value that can be used as borrowing power within a given market. A higher collateral factor allows users to borrow more against their deposited assets;</li> <li><code>Borrow limit:</code> the maximum amount of assets that can be borrowed within a specific market;</li> <li><code>Liquidation:</code> a borrowing account becomes insolvent when the borrow balance exceeds the amount allowed by the collateral factor. Other users can repay a portion of its outstanding borrow in exchange for a portion of its collateral, with a liquidation incentive.</li> </ul> <p>SBM V2:</p> <ul> <li><code>Borrow Rate:</code> the interest rate borrowers pay for borrowing a specific asset. It fluctuates based on the market\u2019s borrow utilization rate \u2014 as utilization increases, the borrow rate typically rises;</li> <li><code>Collateral:</code> the asset a user supplies and designates as collateral to secure their borrowings. If the collateral value falls below the required threshold, liquidation may occur;</li> <li><code>LLTV:</code> the maximum borrowing ratio before a position becomes subject to liquidation. For example, an LLTV of 80% means liquidation will occur if the loan value reaches 80% of the collateral value;</li> <li><code>Liquidity:</code> the amount of assets currently available in the market for borrowing. High liquidity means more assets are available to borrow; low liquidity may indicate limited borrowing capacity.</li> </ul>"},{"location":"getting_started/concepts/borrow/#borrow-assets","title":"Borrow Assets","text":"<ul> <li>Connect your Web3 wallet on TronLink or other supported wallet app to the JustLend DAO (https://justlend.org).</li> <li>To borrow Asset on SBM V1:<ul> <li>Navigate to \u201cSBM V1\u201d, choose the asset you wish to borrow, then click \u300cBorrow\u300d in the corresponding  market.</li> <li>Enter the borrowing amount you want to borrow, then click \u300cBorrow\u300d and confirm the transaction.</li> </ul> </li> <li>To borrow Asset on SBM V2:<ul> <li>Navigate to \u201cSBM V2\u201d, select the market under All Borrow Markets, then click \u300cDetails\u300d.</li> <li>Choose Borrow/Collateralize, enter the borrowed amount and collateral amount.<ul> <li>You may choose to complete only the Collateralize operation first, but note that collateral does not generate any interest, then click \u300cCollateralize\u300d.</li> <li>If you already have sufficient collateral, you may complete only the Borrow operation, but ensure that your Risk Level remains within a healthy range, then click \u300cBorrow\u300d.</li> <li>You may also complete both the Collateralize and Borrow operations at the same time. In this case as well, make sure your Risk Level stays within a healthy range, then click **             \u300cBorrow &amp; Collateralize\u300d**.</li> </ul> </li> </ul> </li> </ul> <p>Please note that borrowing assets on the web interface may require up to two signature confirmations in certain cases (an additional signature may be needed when the process involves increasing collateral). Depending on your situation, there may also be signature steps beyond the initial approval. These signature requirements are part of the website\u2019s interaction flow and are not enforced by the underlying smart contract logic.</p>"},{"location":"getting_started/concepts/energy_rental/","title":"Energy Rental","text":"<p>JustLend DAO integrates the energy rental protocol, which aims to provide users with a more convenient and cheaper way to obtain energy. The energy rental protocol is open to all TRON network users and supports one-to-many renting, enabling users to rent energy not only for themselves but also for others. The user-friendly interface is designed to accommodate users managing multiple orders seamlessly.</p> <p>When renting energy, you need to specify three key parameters based on your requirements, which are Rental Amount, Rental Duration and Receiving Address.</p> <ul> <li> <p>Rental Amount: the amount of energy you need.</p> <ul> <li>The actual energy rented is calculated based on the corresponding proxy TRX amount. Due to market fluctuations, the rented energy amount may experience slight changes during the transaction;</li> <li>Note: the energy used will be fully restored after 24 hours and can be used again;</li> <li>If you are not sure about the amount of energy you need, please refer to: One USDT transfer transaction \u2248 120,000 energy. (may fluctuate according to market trading conditions).</li> </ul> </li> <li> <p>Rental Duration: this is the time you need to use the energy.</p> <ul> <li>Supports renting by the hour or by the day, with a maximum single rental period of 30 days\uff1b</li> <li>Rental duration is calculated at the time of placing the order. Market price fluctuations may result in slight increases or decreases in actual usage time;</li> <li>Note: Shorter rental durations are more affected by market price volatility. If the rental duration is less than 3 hours, please be sure to cancel the rent immediately after completing the transaction. This will prevent early liquidation due to price fluctuations and avoid unnecessary losses.</li> </ul> </li> <li> <p>Receiving Address: the address where the rented energy will be allocated.</p> <ul> <li>If you rent for yourself, this field is not required. If renting for another address, this field is required.</li> <li>Note: Renting for contract addresses is not supported.</li> </ul> </li> </ul>"},{"location":"getting_started/concepts/energy_rental/#placing-an-order","title":"Placing An Order","text":"<p>Once the parameters are set, you can place an order to proceed with the transaction. The rental protocol will require a prepayment, which includes a deposit and rental fee:</p> <ul> <li> <p>Deposit Fee: calculated as 0.05% of the TRX required for the rental energy, with a minimum deposit of 40 TRX.</p> <ul> <li>If the rent order is returned on time, the deposit is fully refunded. If not returned before expiry, the order may be liquidated, and the deposit will be forfeited to community liquidators as a reward.</li> </ul> </li> <li> <p>Rental Fee: includes Occupation Fee (charges based on the rental duration) and Usage Fee (charges based on the rental amount):</p> <ul> <li>Occupation Fee: the energy you use is charged based on the time you use. The longer you use, the more you will be charged.<ul> <li>The prepayment includes the occupancy fee for your entire rental time. If you terminate the rent early, the occupancy fee will be refunded in proportion to the occupancy time.</li> </ul> </li> </ul> </li> <li> <p>Usage Fee: the cost of your energy usage fee is charged as one day's rental fee based on the amount of energy you rent.</p> <ul> <li>Since it takes 24 hours for energy to recover after use, the usage fee is charged based on 1 day.</li> <li>when you return to the energy:<ul> <li>If the energy has been fully restored, the usage fee will be fully refunded;</li> <li>If the energy has been used up, 0.5 days of usage fee will be deducted from your account;</li> <li>If part of the energy has been used, your usage fee will be deducted proportionally.</li> </ul> </li> </ul> </li> </ul> <p>After completing the rental transaction, you can manage your orders via the energy rental interface. Options include returning the rent, extending the rent order, viewing the actual energy received, and checking the remaining rental duration.</p> <p>We recommend users customize their leasing plans based on their specific needs: * For single transactions, we recommend returning the energy immediately after use. This avoids liquidation and helps save on occupation fees. * For users with regular daily transactions, we suggest opting for a long-term hassle-free rental plan by renting energy for 30 days based on daily energy consumption. With the 24-hour full restoration rule, there is no need to rent excessive amounts of energy.</p>"},{"location":"getting_started/concepts/energy_rental/#cost-estimation","title":"Cost Estimation","text":"<p>To provide a clearer understanding of the costs involved in transferring USDT by renting energy versus directly burning TRX, we present the following cost estimates through two examples:</p> <p>Scenario 1: Renting 200k Energy for One Day to Transfer USDT</p> <p>After renting 200k energy for one day, the USDT transfer is completed, and the rental is terminated immediately. The costs associated with this scenario are based on the prepayment and potential refund formulas previously outlined.</p> Receiver holding USDT Receiver without USDT Calculation details Txn example rent energy cost - 65.363749 - 65.363749 65.363749 for rent 200k energy rentTxn rent energy gas - 2.153090 - 2.153090 1.77009 burn for energy; 0.383 burn for bandwidth rentTxn transfer USDT gas - 0.345000 - 0.345000 0.345 for USDT bandwidth whatever holding USDT or not noUsdtTxn; holdingUsdtTxn return energy gas - 0.378000 - 0.378000 return txn just burn bandwidth for gas holdingUsdtReturnTxn; noUsdtTxn refund 60.413664 59.262775 return TRX when end rent total energy rent cost - 7.826175 - 8.977064 total cost (in USD) - $1.57 - $1.80 0.20USDpreTRX <p>Scenario 2: Directly Burning TRX to Transfer USDT Without Energy</p> <p>In this scenario, TRX is burned directly to facilitate the USDT transfer without renting any energy. The cost incurred here is solely dependent on the amount of TRX burned for the transaction.</p> Receiver holding USDT Receiver without USDT Calculation details Txn example burn TRX cost - 27.344700 - 55.064700 130,285 energy for notholding USDT; 64,285 energy for holding USDT; 345 bandwidth cost 0.345 TRX transfer to a without USDT address; transfer to a holding USDT address total cost (in USD) - $5.4689 - $11.0129 0.20USDpreTRX <p>Comparison Insight</p> <p>By comparing these two scenarios, it becomes evident that the cost of using rented energy for transaction cost is significantly lower than the cost of directly burning TRX. Additionally, the presence of USDT in the receiving address affects the computational load of the contract, which in turn impacts the overall transaction cost.</p> Receiver holding USDT Receiver without USDT rent energy cost $1.57 $1.80 burn TRX cost $5.4689 $ 11.0129 save - $3.8989 - $9.2129"},{"location":"getting_started/concepts/liquidations/","title":"Liquidations","text":"<p>Liquidation is determined by Risk Value, which is a critical metric within the JustLend DAO Protocol that measures the safety of a borrow position. It is calculated as:</p>      Risk Value = Total Borrow / Borrow Limit * 100  <ul> <li><code>Total Borrow:</code> sum of all assets borrowed by the user;</li> <li><code>Borrow Limit:</code> \u2211 (Asset supplied by the user * Collateral Factor of the asset).</li> </ul> <p>The Risk Value measures a borrow position\u2019s stability. The Borrow Limit, set by JustLend DAO Governance for each asset, determines the maximum percentage of value that can be borrowed against the asset. For example, if a user supplies $100 in TRX with an collateral factor 80% and $200 in SUN with an collateral factor 75%. Then, borrows $90 worth of USDD and $50 worth of JST tokens from SBM. we can see:</p> <p>Borrow Limit  =  \u2211 (Asset supplied * Collateral Factor) = 100 * 80% + 200 * 75% = 230</p> <p>Risk Value  =  Total Borrow / Borrow Limit * 100 = (90 + 50) / 230 * 100 = 60.87</p> <p>A risk value above 100 represents a position that is above the liquidation threshold. Regular monitoring is essential, as the risk value fluctuates based on both the value of collateral factor and borrowed assets. To reduce the risk value , users can either supply more collateral or repay part of the borrow position. The risk value is directly tied to collateral value. If the collateral value increases, the risk value  decrease; if it falls, the risk value increases, increasing the risk of liquidation.</p> Range Levels of risk Recommendations 0-35 Low Risk Healthy portfolio, eligible for loans. 35-60 Medium Risk Healthy portfolio overall, eligible for extra loan, but with caution. 60-80 High Risk High Risk Portfolio faces risk of liquidation, and you are advised to add collateral or pay off part of your loans. 80-100 Extremely High Risk Collaterals are about to be liquidated, and you are advised to add collateral or pay off part of your loans. <p>Liquidation occurs when a borrower\u2019s risk value exceeds 100, indicating that their collateral is insufficient to cover the borrowed amount. This can happen due to a decline in collateral value or an increase in the borrowing amount. During a liquidation, a liquidator can repay up to 50% of a borrower's debt for a single asset in one liquidation transaction, and a liquidation fee is applied to the borrower\u2019s collateral. As a permissionless process, any network participant can initiate the liquidation of an eligible position.</p>"},{"location":"getting_started/concepts/liquidations/#liquidation-tool","title":"Liquidation Tool","text":"<p>Liquidation will be triggered when the risk value of your positions hits 100. The liquidator will settle the debt (in the borrowed token), take away the supplied asset (in the corresponding jToken), and earn a liquidation reward equal to 8% of the repaid debt value. It should be noted that each liquidation can only cover the debt of one token.</p> <p>As a borrower, please keep a close eye on your risk value to prevent liquidation. Once liquidation occurs, you will find a record of your jTokens being transferred out of your wallet.</p> <p>Note: Before you proceed to use the liquidation tool, please be advised that you must first agree to the terms outlined in the Liquidation Tool Disclaimer. This disclaimer is designed to inform you of the risks, responsibilities, and conditions associated with the use of liquidation tool. By proceeding to use the liquidation tool, you confirm that you have read, understood, and accept the terms of the disclaimer. If you do not agree with any part of the disclaimer, you are not permitted to utilize liquidation tool and discontinue use immediately.</p>"},{"location":"getting_started/concepts/repay/","title":"Repay","text":"<p>Repaying borrowed tokens is a critical aspect of managing borrow positions on the JustLend DAO Protocol. With flexible repayment options and user-friendly tools, JustLend DAO makes it easy for borrowers to maintain healthy collateralisation ratios and prevent liquidation risks.</p> <p>Borrowers can repay their loans using the same tokens they borrowed or through jTokens (collateral tokens) of the same underlying asset. Here are some benefits of repayment:</p> <ul> <li>By reducing the outstanding borrow amount, repayment strengthens the collateralisation ratio, ensuring the position remains adequately collateralised;</li> <li>A higher collateralisation ratio minimizes the risk of liquidation by maintaining a safe margin between the collateral value and the borrowed amount;</li> <li>Repayment allows borrowers to safely withdraw a portion of their collateral, offering greater flexibility in managing their assets.</li> </ul>"},{"location":"getting_started/concepts/repay/#how-do-i-repay-assets","title":"How Do I Repay Assets","text":"<ul> <li>Connect your Web3 wallet on TronLink or other supported wallet app to the JustLend DAO (https://justlend.org).</li> <li>To Repay Asset on SBM V1:<ul> <li>Navigate to \u201cSBM V1\u201d, choose the asset you wish to repay, then click \u300cRepay\u300d under borrowed assets;</li> <li>Enter the amount you want to repay, then click \u300cRepay\u300d and confirm the transaction.</li> </ul> </li> <li>To Repay Asset on SBM V2:<ul> <li>Navigate to \u201cSBM V2\u201d, select the repay asset under All Borrow Markets, then click \u300cDetails\u300d.</li> <li>Choose Repay/Redeem, enter the repay amount and redeem amount.<ul> <li>You may choose to complete only the Repay operation first. After entering the amount, then click \u300cRepay\u300d.</li> <li>You may also complete only the Redeem operation, but ensure that your Risk Level remains within a healthy range, then click \u300cRedeem\u300d.</li> <li>Alternatively, you can complete both Repay and Redeem operations simultaneously. In this case, also make sure your Risk Level stays within a healthy range, then click \u300cRepay &amp; Redeem\u300d.</li> </ul> </li> </ul> </li> </ul>"},{"location":"getting_started/concepts/risks/","title":"Risks","text":"<p>The JustLend  DAO Protocol provides decentralized and efficient access to liquidity, empowering users across the TRON ecosystem. However, as with any decentralized finance (DeFi) protocol, there are inherent risks involved. To address these, JustLend has implemented robust risk management measures, ensuring user confidence and protocol resilience. Below, we outline the key risks and the steps taken to mitigate them.</p>"},{"location":"getting_started/concepts/risks/#smart-contract-risk","title":"Smart Contract Risk","text":"<p>Smart contracts are critical to the functioning of the JustLend DAO Protocol, but they can sometimes contain bugs or vulnerabilities in their code, which may compromise the protocol\u2019s security or its reserve tokens. These vulnerabilities could potentially be exploited by malicious actors, affecting the integrity of transactions and liquidity.</p>"},{"location":"getting_started/concepts/risks/#mitigation-measures","title":"Mitigation Measures:","text":"<ul> <li>Public Code Audits: JustLend DAO's smart contract code is publicly available for external audits. It has undergone multiple professional third-party audits by recognized experts to identify and address any vulnerabilities;</li> <li>Community Review: Any proposed changes to the protocol are thoroughly reviewed and approved by the JustLend DAO community before implementation, ensuring collective oversight;</li> <li>Bug Bounty Program: To further reduce the risk of undiscovered vulnerabilities, JustLend DAO runs an ongoing bug bounty program. This incentivizes external developers to identify and report potential issues, allowing them to be fixed before they can cause harm.</li> </ul>"},{"location":"getting_started/concepts/risks/#oracle-risk","title":"Oracle Risk","text":"<p>JustLend DAO relies on third-party oracles to provide essential data, such as price feeds and redemption ratios for liquid staking tokens. While oracles are vital to the protocol, their reliance introduces the risk of incorrect data being provided if an oracle fails or is compromised. This could lead to inaccurate valuations and potentially harmful actions within the protocol, such as incorrect collateral liquidation or improper lending terms.</p>"},{"location":"getting_started/concepts/risks/#mitigation-measures_1","title":"Mitigation Measures:","text":"<ul> <li>Decentralized Oracles: To minimize the risks associated with centralization, JustLend DAO utilizes decentralized oracles like WinkLink, which provide tamper-resistant data feeds. This ensures greater reliability and security, as the data is less susceptible to manipulation or errors from a single source;</li> <li>Community Review: These decentralized oracles are also equipped with additional security measures that further protect the integrity of the data, reducing the likelihood of inaccurate or malicious inputs.</li> </ul>"},{"location":"getting_started/concepts/risks/#collateral-risk","title":"Collateral Risk","text":"<p>The assets used as collateral within the JustLend DAO Protocol are subject to market fluctuations. A sharp decline in the value or liquidity of collateral could lead to under-collateralization or even bad debt, which poses a risk to both lenders and the platform as a whole. Without proper safeguards, this could lead to liquidations that do not cover the full value of outstanding loans, resulting in losses for stakeholders.</p>"},{"location":"getting_started/concepts/risks/#mitigation-measures_2","title":"Mitigation Measures:","text":"<ul> <li>Risk Service Providers: JustLend DAO partners with reputable risk service providers that continuously monitor the performance of collateral and assess the stability of the market. These services help detect potential risks early and ensure that the collateral remains adequate to cover outstanding loans;</li> <li>Risk Parameters: JustLend DAO has set key risk parameters, such as, which are borrow limit, designed to protect the protocol from sudden market changes. These parameters help ensure that collateral remains sufficient to secure the borrows, reducing the likelihood of under-collateralization;</li> <li>Governance Oversight: The JustLend DAO community and governance framework play a crucial role in adjusting these risk parameters based on market conditions. This allows the protocol to remain adaptable and respond to fluctuations in the market, ensuring a balanced and secure lending environment.</li> </ul>"},{"location":"getting_started/concepts/risks/#risk-alert","title":"Risk Alert","text":""},{"location":"getting_started/concepts/risks/#why-cant-i-receive-email-notifications","title":"Why can't I receive email notifications?","text":"<p>If you have enabled \u201cRisk Alert\u201d yet still fail to receive email notifications even when the trigger conditions are met, check the following settings:</p> <ol> <li>Mailbox Settings</li> <li>Junk folder: Check the junk folder in your mailbox. Sometimes, email notifications can be mistakenly classified as junk emails. If you find the target notification in the junk folder, move it to your inbox or add the sender to your \u201cContacts\u201d.</li> <li>Email filters: Verify if your email service provider has set filters that have blocked or filtered out the email notifications. It is important to make sure the sender\u2019s address is added to your whitelist or allowlist.</li> <li>Email Sending Issues</li> <li>Sending delays: Sometimes, email notifications may not come through quickly due to the delay issues. Please be patient and check your inbox again later.</li> <li>Sending failures: If your emails cannot be sent or are rejected, you may also experience difficulty in receiving email notifications. In this case, you can check your outbox about this kind of issue and try again in the JustLend platform.</li> <li>User Information</li> <li>Incorrect email address: Make sure you have provided a correct email address in the \u201cRisk Alert\u201d service on JustLend DAO and have verified that your address functions well.</li> </ol>"},{"location":"getting_started/concepts/staked_trx/","title":"Staked TRX","text":"<p>Staked TRX is a feature launched by JustLend DAO that enables one-click TRX staking in accordance with Stake 2.0 rules. Once you have staked your TRX, JustLend DAO will take care of the cumbersome procedures, such as Super Representative (SR) voting and reward claiming, and rent out the Energy obtained from TRX staking automatically to generate more yields for you.</p> <p>The SRs receiving your TRON Power obtained from staking TRX will be decided via voting by sTRX Governance. The whole process will be open, transparent, and fully decentralized.</p>"},{"location":"getting_started/concepts/staked_trx/#architecture-of-the-strx-system","title":"Architecture of the sTRX system","text":"<ul> <li> <p>TRX Holders: deposit TRX into the TRC484 contract to receive sTRX at the current exchange rate.</p> </li> <li> <p>sTRX Holders:</p> <ul> <li>Convert sTRX back to TRX at the exchange rate to exit the system;</li> <li>Participate in the governance of TRC484, including Super Representative (SR) voting, resource market interest rate adjustments, and other decisions;</li> <li>Use sTRX as a standard TRC20 token to engage with various applications within the TRON ecosystem.</li> </ul> </li> <li> <p>Resource Consumers:</p> <ul> <li>Rent resources within TRC484 by staking TRX (TRX deposited in sTRX system cannot be used for this purpose);</li> <li>Return rented resources, pay the rental fees, and reclaim the remaining staked TRX in TRC484.</li> </ul> </li> <li> <p>Liquidators: liquidate overdue resource rental transactions and earn liquidation rewards.</p> </li> </ul>"},{"location":"getting_started/concepts/staked_trx/#staked-trx-yield","title":"Staked TRX Yield","text":"<p>The sources of yields form staking TRX is mainly composed of two parts:</p> <ul> <li>Voting rewards: the rewards for voting TRON Power obtained from TRX staking to SRs;</li> <li>Energy rental rewards: the revenue from Energy Rental on JustLend DAO, distributed to stakers according to the amount and percentage of TRX they have staked.</li> </ul> <p>The staking APY fluctuates with the changes in voting rewards and the Energy rental market. You can check the latest APY anytime in Staked TRX page.</p>"},{"location":"getting_started/concepts/staked_trx/#stake-and-unstake-trx","title":"Stake and Unstake TRX","text":"<ul> <li> <p>Connect your Web3 wallet on TronLink or other supported wallet app to the JustLend DAO (https://justlend.org).</p> </li> <li> <p>Stake TRX:</p> <ul> <li>Navigate to the \"Staked TRX\" page, you will see the latest Staked APY;</li> <li>Specify the amount you want to stake, click \u300cStake Now\u300d;</li> <li>Cofirm the transaction, then you will receive a proportionate amount of sTRX as the receipt.</li> </ul> </li> <li> <p>Unstake TRX:</p> <ul> <li>Unstake on JustLend DAO: Click the \u300cunstake\u300d tab, enter the amount of sTRX you want to unstake, and then confirm the transaction;</li> <li>Unstake via a third-party platform: You can initiate transactions on other platforms, such as HTX and SunSwap, to swap your sTRX.</li> </ul> </li> </ul> <p>If you unstake your sTRX on JustLend DAO, you need to wait for 14 days before withdrawing the unstaked TRX by clicking \u300cWithdraw\u300d on the same page.</p>"},{"location":"getting_started/concepts/supply/","title":"Supply","text":"<p>Supplying tokens to the JustLend DAO allows users to earn interest on their digital assets while simultaneously using them as collateral for borrowing. When users supply tokens, these assets are deposited into the JustLend DAO liquidity pool, a system of smart contracts designed to facilitate secure, over-collateralized borrowing.</p> <p>In return, users receive jTokens, TRC-20 tokens representing their supplied assets. jTokens can be redeemed at any time for the underlying assets. As interest accrues, the exchange rate of jTokens relative to the underlying assets increases over time, reflecting the earned interest. This ensures that users benefit from a seamless and dynamic interest compounding mechanism while maintaining liquidity through redeemable jTokens.</p>"},{"location":"getting_started/concepts/supply/#how-it-works","title":"How It Works","text":"<p>Interest Accrual: Supplied tokens automatically earn interest based on the current market supply rate. Interest is dynamically accrued as the balance of supplied tokens grows, ensuring that users benefit from up-to-date rates.</p> <p>Determining Interest Rates: Interest rates for suppliers are primarily influenced by the borrow utilization rate, which reflects the proportion of assets borrowed relative to the total pool supply. Governance parameters, such as the collateral factor and interest rates, can also be adjusted through community decisions.</p> <p>Dynamic Rate Updates: As tokens are supplied, borrowed, repaid, or withdrawn from the liquidity pool, interest rates are updated in real time. These adjustments are guided by on-chain data, including token balances, oracle-determined prices, and the borrow utilization ratio.</p>"},{"location":"getting_started/concepts/supply/#how-do-i-supply-assets","title":"How Do I Supply Assets","text":"<p>Supplying can be done with a user interface SBM V1 or SBM V2. Before we walk through the steps of a supplying sequence, let\u2019s cover some key parameters:</p> <p>SBM:</p> <ul> <li><code>Supply APY:</code> the annual rewards from the jTokens users receive by supplying assets, which influenced by the borrow utilization rate and fluctuated by the time;</li> <li><code>Total Supply:</code> the total supply in the market. As the total supply changes, the Supply APY will also change accordingly;</li> <li><code>Suppliers:</code> the amount of users participating in the supply market.</li> </ul> <p>SBM V2:</p> <ul> <li><code>Supply APY:</code> the annualized return earned from supplying assets to the Vault. It is influenced by the market\u2019s borrow utilization rate and may fluctuate over time;</li> <li><code>Total Supply:</code> the total amount of assets supplied in the market. As the total supply changes, the Supply APY will adjust accordingly;</li> <li><code>Collateral Support:</code> refers to the types of assets supported across the underlying Markets connected to this Vault. While you only deposit a single asset into the Vault, your liquidity may be lent out to borrowers who pledge these supported collateral tokens.</li> </ul>"},{"location":"getting_started/concepts/supply/#supply-assets","title":"Supply Assets","text":"<ul> <li>Connect your Web3 wallet on TronLink or other supported wallet app to the JustLend DAO (https://justlend.org).</li> <li>To Supply Asset on SBM V1\uff1a<ul> <li>Navigate to \u201cSBM V1\u201d, choose the asset you wish to supply, then click \u300cSupply\u300d in the corresponding  market.</li> <li>Enter the amount you want to supply and click \u300cSupply\u300d.</li> </ul> </li> <li>To supply Asset on SBM V2:<ul> <li>Navigate to \u201cSBM V2\u201d, select the asset under All Supply Vaults, then click \u300cDetails\u300d.</li> <li>Choose Supply, enter the supply amount, then click \u300cSupply\u300d.</li> </ul> </li> </ul> <p>After the contract is successfully approved, the assets will be transferred from your wallet to the JustLend DAO protocol. Once they are borrowed by other users, they will begin generating interest. This interest will be automatically added to your Supply Balance.</p>"},{"location":"getting_started/concepts/withdraw/","title":"Withdraw","text":"<p>JustLend DAO empowers users to manage their assets effectively by enabling the withdrawal of supplied tokens. Suppliers can withdraw their tokens as long as there is sufficient liquidity in the reserve. The withdrawal amount is determined by the availability of underlying assets and the user\u2019s ability to maintain a sufficient collateral ratio for any active borrow positions.</p> <p>When withdrawing with an active borrow position, it\u2019s essential to carefully manage your collateralisation ratio to avoid liquidation. Reducing collateral will decrease the health status and increasing the risk of liquidation.</p>"},{"location":"getting_started/concepts/withdraw/#to-stay-safe","title":"To stay safe:","text":"<ul> <li>Monitor Your Risk Value: Ensure your risk value remains health even after the withdrawal;</li> <li>Stay Below the Liquidation Threshold: Check that your account maintains sufficient collateral to avoid crossing the liquidation parameters;</li> <li>Plan Withdrawals Carefully: Assess the impact of each withdrawal on your overall borrow position to prevent unintentional liquidation risks.</li> </ul>"},{"location":"getting_started/concepts/withdraw/#how-do-i-withdraw-assets","title":"How Do I Withdraw Assets","text":"<ul> <li>Connect your Web3 wallet on TronLink or other supported wallet app to the JustLend DAO (https://justlend.org).</li> <li>To Withdraw Asset on SBM V1:<ul> <li>Navigate to \u201cSBM V1\u201d, choose the asset you wish to withdraw, then click \u300cWithdraw\u300d under supplied assets.</li> <li>Enter the amount you want to withdraw, then click \u300cWithdraw\u300d and confirm the transaction.</li> </ul> </li> <li>To Withdraw Asset on SBM V2:<ul> <li>Navigate to \u201cSBM V2\u201d, select the withdrawal asset under All Supply Vaults, then click \u300cDetails\u300d.</li> <li>Choose Withdraw, enter the withdrawal amount, then click \u300cWithdraw\u300d.</li> </ul> </li> </ul>"},{"location":"getting_started/faqs/spending_cap_issue/","title":"Spending Cap Issue During Transactions","text":""},{"location":"getting_started/faqs/spending_cap_issue/#why-is-the-available-spending-cap-insufficient","title":"Why Is the Available Spending Cap Insufficient?","text":"<ul> <li> <p>If you previously set a custom Spending Cap during the approve transaction, and that Spending Cap has been partially used, you may encounter an \"Insufficient Spending Cap\" hint when the remaining Spending Cap is less than the amount of your current transaction.</p> <ul> <li>In this case, you will need to authorize again, and the new spending cap amount must be greater than or equal to the amount you intend to transact.</li> <li>Please note: a new authorization will overwrite the previous spending cap rather than add to the remaining balance. Therefore, always ensure that the new spending cap is at least equal to your intended transaction amount to avoid failure.</li> </ul> </li> <li> <p>If you selected the default \"Unlimited Spending Cap\" when authorizing for the first time, you will not encounter this issue.</p> </li> </ul>"},{"location":"getting_started/faqs/wallet_connection_questions/","title":"Wallet Connection Questions","text":""},{"location":"getting_started/faqs/wallet_connection_questions/#what-should-i-do-if-justlend-dao-doesnt-recognize-my-newly-installed-wallet-extension","title":"What should I do if JustLend DAO doesn't recognize my newly installed wallet extension?","text":"<p>Refresh the JustLend DAO page after downloading a new wallet extension, as this would help the platform detect your new extension. </p>"},{"location":"getting_started/faqs/wallet_connection_questions/#how-to-switch-networks-in-my-wallet","title":"How to switch networks in my wallet?","text":"<p>User interaction may differ in each wallet. However, in most wallets, you can switch networks in the top menu. Find and select TRON Mainnet in the network list, as shown in the following figures. </p>"},{"location":"getting_started/faqs/wallet_connection_questions/#why-does-not-my-connected-address-on-justlend-dao-change-to-the-target-address-after-i-switch-the-address-in-my-wallet","title":"Why does not my connected address on JustLend DAO change to the target address after I switch the address in my wallet?","text":"<p>In this case, there may be two status of your wallet connection on JustLend DAO: * If your wallet is disconnected, you can click the \u201cConnect Wallet\u201d button to connect your current address to JustLend DAO. This happens because the access to the current address has not been granted to JustLend DAO. * If your wallet address remains unchanged, refresh the page. Then, JustLend DAO will automatically connect to the new address. </p>"},{"location":"getting_started/faqs/wallet_connection_questions/#when-i-have-several-wallet-extensions-why-is-wallet-b-invoked-when-i-choose-to-connect-to-wallet-a","title":"When I have several wallet extensions, why is Wallet B invoked when I choose to connect to Wallet A?","text":"<p>This is because some wallet extensions may have flaws in their adaptability. It\u2019s recommended that you mainly use one wallet extension that suits your needs best. If multiple wallet extensions are needed, you can toggle off those wallet extensions that are not used at the moment in extension management to prevent this problem.</p> <p>Note: After you toggle off other wallet extensions, refresh the JustLend DAO page and connect to it again. </p>"},{"location":"getting_started/faqs/wallet_connection_questions/#what-can-i-do-if-justlend-dao-no-longer-responds-after-i-switch-from-wallet-a-to-wallet-b-and-try-to-make-a-transaction","title":"What can I do if JustLend DAO no longer responds after I switch from Wallet A to Wallet B and try to make a transaction?","text":"<p>You can refresh the page and try to initiate the transaction again.</p> <p>If the platform still fails to respond, toggle off Wallet A, refresh the page, and then try to make the transaction again.</p>"},{"location":"governance/community_forum/","title":"JustLend Forum","text":""},{"location":"governance/jips/","title":"JustLend Improvement Proposals","text":"<p>The JustLend DAO introduces a structured approach to decentralizing the JustLend protocol and empowering community autonomy. JustLend DAO fosters consensus among all participants in the JustLend ecosystem through governance mechanisms and economic incentives. The protocol's functions and the JST token serve as core security elements of the JustLend protocol.</p> <p>Governance mechanisms in decentralized protocols are driven by participation, incentives, self-regulation, and policy management within the community, adapting to and coexisting with the market dynamics. JustLend DAO manages on-chain operations through proposals, enabling the protocol to achieve self-operation, self-governance, and self-evolution based on predefined rules through intelligent management and token economic incentives, without third-party intervention, ultimately maximizing efficiency and value transfer.</p> <p>An essential incentive method in the governance process of JustLend DAO, JST tokenizes various organizational elements, integrating monetary capital, human capital, and other resources to enhance organizational efficiency significantly. The goal of the JST economy is to facilitate the virtuous and long-term development of the entire JustLend DAO ecosystem, allowing stakeholders and investors to benefit from a more secure agreement. JST holders are accountable for the protocol and ecosystem, contributing through practical actions such as technical integration (e.g., DeFi front-end integration) or financial investments (e.g., liquidity provision), significantly enhancing protocol execution, security, and functionality.</p> <p>The JustLend DAO was established to facilitate the development and long-term governance of the JustLend DAO protocol. The goal is to create a future-proof governance framework leveraging system incentives and multi-level governance to maintain an effective balance that drives long-term growth and continuous protocol optimization.</p>"},{"location":"governance/jips/#governance-process","title":"Governance Process","text":"<p>JustLend Protocol's governance relies on participants locking JST tokens to acquire voting power for JustLend Improvement Proposals (JIPs).  The governance is first discussed in the JustLend DAO forum. If there is no contentious, then it is conducted through voting. Any users who hold more than 200 million JST can initiate a proposal on the platform, and other users can participate in the vote. If and only if the number of votes in favor of the proposal exceeds the number of negative votes and meanwhile exceeds 600 million, the proposal can be passed and implemented two days later.</p> <p>JST tokens enable holders to collectively act as managers of the protocol, enabling them to vote and propose. The process of submitting a proposal and voting is as shown below (before entering the lock phase, you can cancel the created proposal at any time by proposal)</p> <p></p> <ol> <li>JST holders call governance contracts to create proposals. Once a proposal is successfully created, it will undergo a 2-day review period. Voting rights are then recorded, and the voting process begins after the review period ends.</li> <li>JST holders receive votes and can choose to either support or oppose a proposal based on its content. Each JST holder is entitled to one vote. The voting period lasts for 3 days.</li> <li>Once the voting period ends, the governance contract will determine whether the proposal has been approved based on the number of votes. If the proposal does not pass, it will be terminated. If the proposal is approved, it will trigger the time lock executor.</li> <li>If the proposal is passed, the proposal will enter a lock-up period of 48 hours. After the lock-up period ends, the proposal will be in a pending state, and the proposal will take effect immediately after the execution.</li> </ol> <p>Taken together, in general, a full proposal will take at least a week.</p>"},{"location":"governance/tokenomics/","title":"Tokenomics","text":"<p>The term tokenomics encompasses a wide range of concepts that defines the science and behavior of blockchain economies. In simple terms, tokenomics are the financial foundation of blockchains. Each protocol has its unique economic model, and for the protocol's healthy and enduring development, the economic model should include design, distribution, and management of tokens, as well as the incentives and mechanisms that drive their value and utilization.</p> <p>The JustLend tokenomics  is designed to promote a healthy, long term self-sustaining economy with participant incentives aligned to the security and decentralization of the network. The main participants in this economy are suppliers, borrowers and clients who stakes TRX or USDT. The protocol revenue from users will be used to optimize income distribution and cater to the protocol's present and future needs.</p>"},{"location":"governance/tokenomics/#the-justlend-dao-economy","title":"The JustLend DAO Economy","text":"<p>JustLend DAO is a decentralized governance protocol, where users can participate in governance using the platform token JUST (Symbol: JST) to make decisions about the development of JustLend DAO.  The platform has integrated multiple independent DeFi protocols and plans to incorporate more to form the JustLend economy. There are four integrated protocols characterize the JustLend economy:</p> <ul> <li>SBM (Supply and Borrow Market):  A supply and borrow market protocol launched in December 2020.</li> <li>sTRX (Staked TRX):  A high-efficiency and yield TRON network staking pool launched in April 2023.</li> <li>JustStable Coin (USDJ): A stablecoin minting protocol launched in April 2020, which was the first application protocol of JST.</li> <li>Energy Rental: A platform for flexible and low-cost energy rental on the TRON network launched in April 2023, significantly reducing transaction costs.</li> </ul>"},{"location":"governance/tokenomics/#sbm-supply-and-borrow-market","title":"SBM - Supply and Borrow Market","text":"<p>SBM is a TRON-powered money market protocol designed to create fund pools with interest rates determined by an algorithm based on the supply and demand of TRON assets. The protocol involves two key roles: suppliers and borrowers, who directly engage with the protocol to earn or pay a floating interest rate. SBM serves as the core protocol of JustLend DAO.</p> <p>Within SBM, each money market corresponds to a unique TRON asset, such as TRX, TRC20 stablecoins (e.g., USDT), or other TRC20-based tokens. The protocol features an open and transparent ledger that records all transactions and historical interest rates.</p>"},{"location":"governance/tokenomics/#staked-trx","title":"Staked TRX","text":"<p>TRX holders have the opportunity to receive the receipt token sTRX by staking TRX, allowing them to earn double yields from voting and Energy rental. In contrast to participating in Stake 2.0, sTRX offers higher returns and can be utilized in DeFi applications, including decentralized exchanges (DEXs). This token eliminates liquidity constraints associated with the unstaking period in Stake 2.0.</p>"},{"location":"governance/tokenomics/#juststable-coin-usdj","title":"JustStable Coin - USDJ","text":"<p>USDJ is a stablecoin native to the TRON network, generated through decentralized smart contracts. Users can stake TRX as collateral to create USDJ, which then circulates freely like any other cryptocurrency. USDJ is staked to the US dollar using Collateralized Debt Positions (CDPs) and features autonomous feedback mechanisms to maintain its stability.</p>"},{"location":"governance/tokenomics/#energy-rental","title":"Energy Rental","text":"<p>An innovative protocol for flexible and cost-effective energy rental on the TRON network. The energy obtained through this protocol is significantly cheaper than that obtained through burning or staking TRX, enabling the cost of most transactions to be reduced to below 1 TRX.</p>"},{"location":"governance/tokenomics/#supply-mining","title":"Supply Mining","text":"<p>The latest round of JustLend DAO deposit supply mining started on February 16, 2024, and has already completed 36 rounds. The mining activity is community-driven and funded by the subDAO of JustLend DAO - GrantsDAO, which empowers community developers, contributors, participants, and any projects that contribute to the ecosystem, while providing positive incentives to ecosystem participants.</p>"},{"location":"governance/tokenomics/#buyback-burning","title":"Buyback &amp; Burning","text":"<p>The JST ecosystem burn plan implemented by GrantsDAO aims to use protocol base income and donations from partner projects to provide liquidity to SunSwap V2 for JST trading pairs and burn the resulting liquidity tokens (e.g., SUNSWAP-JST-TRX V2 Token), thus accumulating JST liquidity in DEX. Compared to directly burning tokens, the ecosystem burn plan's approach reduces supply while maintaining liquidity in DEX, stabilizing the price of JST.</p>"},{"location":"governance/tokenomics/#revenue-distribution-from-protocol-reserves","title":"Revenue Distribution from Protocol Reserves","text":"<p>The protocol reserves mainly consist of accumulated borrow fees. The revenue allocation model divides income from these reserves into four key segments:</p> <ul> <li>Risk Fund(40%): This fund is set up to mitigate potential deficiencies in the protocol, especially during instances of ineffective or delayed liquidations. The allocation to the risk fund remains constant to uphold a robust financial buffer;</li> <li>DAO Reserve(30%): The reserve strengthens the protocol's resilience and serves as a robust safety net for its continuous operations;</li> <li>Incentives(20%): This part is emmitted as incentives for suppliers and borrowers;</li> <li>Supply Mining Rewards(10%): This rewards utilized a portion of the reserve revenue to incentivize  developers, contributors, participants, and any projects that contribute to the ecosystem.</li> </ul> <p></p>"},{"location":"resources/risk_warning/","title":"Risk Warning","text":""},{"location":"resources/risk_warning/#liquidation-tool-disclaimer","title":"Liquidation Tool Disclaimer","text":"<p>Important Disclaimer: Version 1.0 (Last update: 19 February 2025)</p> <p>Please read this disclaimer carefully before using the JustLend SBM Liquidation Tool. Using this tool indicates that you fully understand and agree to the following terms\uff1a</p> <p>On-Chain Risk Warning: The liquidation tool operates based on the JustLend SBM smart contract and fully adheres to its specifications. Please note that the liquidation tool functions strictly according to its designed logic and does not assume responsibility for the logic itself. We advise you to use the tool only after fully understanding the JustLend contract.</p> <p>Accuracy of Information: The information and data provided in this market liquidation process are sourced from public channels. We will make every effort to ensure their accuracy and timeliness; however, no explicit or implied guarantee is made regarding the accuracy, completeness, or suitability of the information. Market fluctuations and blockchain network congestion may lead to data inconsistencies. The JustLend SBM Liquidation Tool may exhibit discrepancies due to fluctuations and congestion, and final returns may vary depending on market conditions at the time of liquidation. As such, the liquidation returns displayed on the platform are estimates and do not guarantee actual profits. Participants are encouraged to independently verify the authenticity and reliability of the information used such as price, depth, market volatility risk, etc. and make decisions based on their own risk tolerance.</p> <p>Third-Party Agreements and External Dependencies: The JustLend SBM Liquidation Tool may interact with other DeFi protocols. If you utilize external protocol calls for liquidation, please assess the reliability of these protocols independently. We are unable to ensure the security, operational status, or any changes made to these external protocols. By using this feature, you acknowledge and accept the potential risks associated with such interactions.</p> <p>Governing Law: This disclaimer is governed by the applicable laws and regulations. In the event of any disputes, the matter should be submitted to the appropriate legal authorities for resolution.</p> <p>Limitation of Liability: To the fullest extent permitted by applicable law, we shall not be liable for any direct, indirect, incidental, or consequential loss, damage, or liability arising from the use or inability to use this liquidation feature. You should assess the suitability of the JustLend SBM Liquidation Tool for your needs and use it only after fully understanding the risks involved. Participants use the market liquidation services at their own risk.</p> <p>The platform retains the final right to interpret this disclaimer, which may be updated at any time. Please check the latest version regularly.</p>"},{"location":"resources/community/links/","title":"Links","text":""},{"location":"resources/community/links/#websites","title":"Websites","text":"<ul> <li>Main JUST Network</li> <li>Main JustLend Network</li> <li>JustLend Markets</li> <li>JUST Stablecoin (USDJ)</li> </ul>"},{"location":"resources/community/links/#telegram-groups","title":"Telegram groups","text":"<ul> <li>JUST-Defi</li> <li>JustLend DAO Official</li> </ul>"},{"location":"resources/community/links/#forum","title":"Forum","text":"<ul> <li>JustLend DAO Forum</li> </ul>"},{"location":"resources/community/links/#x-formerly-twitter","title":"X (Formerly Twitter)","text":"<ul> <li>JUST-Defi Twitter</li> </ul>"},{"location":"resources/community/links/#developers","title":"Developers","text":"<ul> <li>Github</li> <li>Bug Bounty</li> </ul>"},{"location":"resources/community/wallet_integration_cooperation/","title":"Wallet Integration Cooperation","text":"<p>JustLend DAO has established partnerships with prominent projects such as Tronlink, WalletConnect, and imToken. We have now opened an application portal for additional integrations. If your project is interested in collaborating with us, you can apply by clicking Integration Application.</p> <p>Once your application is approved, your brand name and logo will be prominently displayed in relevant sections when users link their wallets. This provides an excellent opportunity to enhance your brand\u2019s visibility and connect with our user base.</p>"},{"location":"resources/community/wallet_integration_cooperation/#integration-requirement","title":"Integration Requirement","text":""},{"location":"resources/community/wallet_integration_cooperation/#project-overview","title":"Project Overview","text":"<ul> <li>Project Name: Provide the official name of the project, ensuring correct case sensitivity.</li> <li>Current Tron Integration Status: Indicate whether the project is already integrated with the Tron blockchain, which is essential for assessing the integration requirements and support needs.</li> </ul>"},{"location":"resources/community/wallet_integration_cooperation/#branding-logo-requirement","title":"Branding Logo Requirement","text":"<ul> <li>Brand Logo: The partner must provide three sizes of their brand logo.<ul> <li>16x16 pixels</li> <li>20x20 pixels</li> <li>66x66 pixels</li> </ul> </li> </ul> <p>These logos will be used in various display contexts within the JustLend Wallet platform.</p>"},{"location":"resources/community/wallet_integration_cooperation/#technical-requirement","title":"Technical Requirement","text":"<ul> <li>Tron Integration Status: If the project is not yet integrated with the Tron blockchain, the partner should provide an integration plan, including a timeline, and submit any necessary technical documentation or support requests.</li> <li>APIs and Protocols: The partner is required to collaborate with the JustLend technical team, following all relevant API protocols and security standards to ensure a smooth and secure integration. Please provide the APIs for the following functionalities. If the wallet does not support any of these features, please leave the corresponding field empty:<ul> <li>Connect Wallet</li> <li>Disconnect Wallet</li> <li>Get Wallet Address Authorization</li> <li>Get Wallet Address</li> <li>Switch Wallet Address</li> <li>Switch Wallet Network</li> <li>Get Token Balance</li> </ul> </li> </ul> <p>Additionally, if the wallet has any special features that require our support, please provide the relevant APIs for those as well.</p>"},{"location":"resources/community/wallet_integration_cooperation/#branding-and-marketing-cooperation","title":"Branding and Marketing Cooperation","text":"<ul> <li>Brand Display: JustLend Wallet will utilize the provided logos and information to display and promote the partner\u2019s brand on the platform.</li> <li>Marketing Collaboration: The partner should work with JustLend Wallet on joint marketing efforts to increase brand visibility and attract more users.</li> </ul>"},{"location":"resources/community/wallet_integration_cooperation/#technical-requirement_1","title":"Technical Requirement","text":"<ul> <li>Please assign a primary contact person and provide the contact information (e.g., email, phone, or other communication channels).</li> </ul>"}]}